window.Platform={};var logFlags={};(function(){function t(t){if(this._element=t,t.className!=this._classCache){if(this._classCache=t.className,!this._classCache)return;var e,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(e=0;i.length>e;e++)r.call(this,i[e])}}function e(t,e){t.className=e.join(" ")}function i(t,e,i){Object.defineProperty?Object.defineProperty(t,e,{get:i}):t.__defineGetter__(e,i)}if(!(window.Element===void 0||"classList"in document.documentElement)){var n=Array.prototype,o=n.indexOf,s=n.slice,r=n.push,a=n.splice,l=n.join;t.prototype={add:function(t){this.contains(t)||(r.call(this,t),e(this._element,s.call(this,0)))},contains:function(t){return-1!==o.call(this,t)},item:function(t){return this[t]||null},remove:function(t){var i=o.call(this,t);-1!==i&&(a.call(this,i,1),e(this._element,s.call(this,0)))},toString:function(){return l.call(this," ")},toggle:function(t){-1===o.call(this,t)?this.add(t):this.remove(t)}},window.DOMTokenList=t,i(Element.prototype,"classList",function(){return new t(this)})}})();var SideTable;if("undefined"!=typeof WeakMap&&0>navigator.userAgent.indexOf("Firefox/")?SideTable=WeakMap:function(){var t=Object.defineProperty,e=Object.hasOwnProperty,i=(new Date).getTime()%1e9;SideTable=function(){this.name="__st"+(1e9*Math.random()>>>0)+(i++ +"__")},SideTable.prototype={set:function(e,i){t(e,this.name,{value:i,writable:!0})},get:function(t){return e.call(t,this.name)?t[this.name]:void 0},"delete":function(t){this.set(t,void 0)}}}(),function(t){function e(t){w.push(t),y||(y=!0,_(n))}function i(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function n(){y=!1;var t=w;w=[],t.sort(function(t,e){return t.uid_-e.uid_});var e=!1;t.forEach(function(t){var i=t.takeRecords();o(t),i.length&&(t.callback_(i,t),e=!0)}),e&&n()}function o(t){t.nodes_.forEach(function(e){var i=f.get(e);i&&i.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}function s(t,e){for(var i=t;i;i=i.parentNode){var n=f.get(i);if(n)for(var o=0;n.length>o;o++){var s=n[o],r=s.options;if(i===t||r.subtree){var a=e(r);a&&s.enqueue(a)}}}}function r(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++L}function a(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function l(t){var e=new a(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}function h(t,e){return b=new a(t,e)}function c(t){return x?x:(x=l(b),x.oldValue=t,x)}function u(){b=x=void 0}function d(t){return t===x||t===b}function p(t,e){return t===e?t:x&&d(t)?x:null}function m(t,e,i){this.observer=t,this.target=e,this.options=i,this.transientObservedNodes=[]}var f=new SideTable,_=window.msSetImmediate;if(!_){var g=[],v=Math.random()+"";window.addEventListener("message",function(t){if(t.data===v){var e=g;g=[],e.forEach(function(t){t()})}}),_=function(t){g.push(t),window.postMessage(v,"*")}}var y=!1,w=[],L=0;r.prototype={observe:function(t,e){if(t=i(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=f.get(t);n||f.set(t,n=[]);for(var o,s=0;n.length>s;s++)if(n[s].observer===this){o=n[s],o.removeListeners(),o.options=e;break}o||(o=new m(this,t,e),n.push(o),this.nodes_.push(t)),o.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=f.get(t),i=0;e.length>i;i++){var n=e[i];if(n.observer===this){n.removeListeners(),e.splice(i,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var b,x;m.prototype={enqueue:function(t){var i=this.observer.records_,n=i.length;if(i.length>0){var o=i[n-1],s=p(o,t);if(s)return i[n-1]=s,void 0}else e(this.observer);i[n]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=f.get(t);e||f.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=f.get(t),i=0;e.length>i;i++)if(e[i]===this){e.splice(i,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,i=t.relatedNode.namespaceURI,n=t.target,o=new h("attributes",n);o.attributeName=e,o.attributeNamespace=i;var r=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;s(n,function(t){return!t.attributes||t.attributeFilter&&t.attributeFilter.length&&-1===t.attributeFilter.indexOf(e)&&-1===t.attributeFilter.indexOf(i)?void 0:t.attributeOldValue?c(r):o});break;case"DOMCharacterDataModified":var n=t.target,o=h("characterData",n),r=t.prevValue;s(n,function(t){return t.characterData?t.characterDataOldValue?c(r):o:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var a,l,n=t.relatedNode,d=t.target;"DOMNodeInserted"===t.type?(a=[d],l=[]):(a=[],l=[d]);var p=d.previousSibling,m=d.nextSibling,o=h("childList",n);o.addedNodes=a,o.removedNodes=l,o.previousSibling=p,o.nextSibling=m,s(n,function(t){return t.childList?o:void 0})}u()}},t.JsMutationObserver=r}(this),!window.MutationObserver&&(window.MutationObserver=window.WebKitMutationObserver||window.JsMutationObserver,!MutationObserver))throw Error("no mutation observer support");(function(t){function e(e,s){var r=s||{};if(!e)throw Error("Name argument must not be empty");if(r.name=e,!r.prototype)throw Error("Options missing required prototype property");return r.lifecycle=r.lifecycle||{},r.ancestry=i(r.extends),n(r),o(r),c(r.prototype),d(e,r),r.ctor=p(r),r.ctor.prototype=r.prototype,r.prototype.constructor=r.ctor,t.ready&&t.upgradeAll(document),r.ctor}function i(t){var e=v[t];return e?i(e.extends).concat([e]):[]}function n(t){for(var e,i=t.extends,n=0;e=t.ancestry[n];n++)i=e.is&&e.tag;t.tag=i||t.name,i&&(t.is=t.name)}function o(t){if(!Object.__proto__){var e=HTMLElement.prototype;if(t.is){var i=document.createElement(t.tag);e=Object.getPrototypeOf(i)}}t.native=e}function s(t){return r(y(t.tag),t)}function r(e,i){return i.is&&e.setAttribute("is",i.is),a(e,i),e.__upgraded__=!0,t.upgradeSubtree(e),h(e),e}function a(t,e){Object.__proto__?t.__proto__=e.prototype:(l(t,e.prototype,e.native),t.__proto__=e.prototype)}function l(t,e,i){for(var n={},o=e;o!==i&&o!==HTMLUnknownElement.prototype;){for(var s,r=Object.getOwnPropertyNames(o),a=0;s=r[a];a++)n[s]||(Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s)),n[s]=1);o=Object.getPrototypeOf(o)}}function h(t){t.readyCallback&&t.readyCallback()}function c(t){var e=t.setAttribute;t.setAttribute=function(t,i){u.call(this,t,i,e)};var i=t.removeAttribute;t.removeAttribute=function(t,e){u.call(this,t,e,i)}}function u(t,e,i){var n=this.getAttribute(t);i.apply(this,arguments),this.attributeChangedCallback&&this.getAttribute(t)!==n&&this.attributeChangedCallback(t,n)}function d(t,e){v[t]=e}function p(t){return function(){return s(t)}}function m(t){var e=v[t];return e?new e.ctor:y(t)}function f(t){if(!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var e=t.getAttribute("is")||t.localName,i=v[e];return i&&r(t,i)}}function _(e){var i=w.call(this,e);return t.upgradeAll(i),i}if(t||(t=window.CustomElements={flags:{}}),t.hasNative=(document.webkitRegister||document.register)&&"native"===t.flags.register,t.hasNative){document.register=document.register||document.webkitRegister;var g=function(){};t.registry={},t.upgradeElement=g}else{var v={},y=document.createElement.bind(document),w=Node.prototype.cloneNode;document.register=e,document.createElement=m,Node.prototype.cloneNode=_,t.registry=v,t.upgrade=f}})(window.CustomElements),function(t){function e(t,i,n){var o=t.firstElementChild;if(!o)for(o=t.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)i(o,n)!==!0&&e(o,i,n),o=o.nextElementSibling;return null}function i(t,n){e(t,function(t){return n(t)?!0:(t.webkitShadowRoot&&i(t.webkitShadowRoot,n),void 0)}),t.webkitShadowRoot&&i(t.webkitShadowRoot,n)}function n(t){return r(t)?(a(t),!0):(l(t),void 0)}function o(t){i(t,function(t){return n(t)?!0:void 0})}function s(t){return n(t)||o(t)}function r(e){if(!e.__upgraded__&&e.nodeType===Node.ELEMENT_NODE){var i=e.getAttribute("is")||e.localName,n=t.registry[i];if(n)return logFlags.dom&&console.group("upgrade:",e.localName),t.upgrade(e),logFlags.dom&&console.groupEnd(),!0}}function a(t){l(t),u(t)&&i(t,function(t){l(t)})}function l(t){(t.insertedCallback||t.__upgraded__&&logFlags.dom)&&(logFlags.dom&&console.group("inserted:",t.localName),u(t)&&(t.__inserted=(t.__inserted||0)+1,1>t.__inserted&&(t.__inserted=1),t.__inserted>1?logFlags.dom&&console.warn("inserted:",t.localName,"insert/remove count:",t.__inserted):t.insertedCallback&&(logFlags.dom&&console.log("inserted:",t.localName),t.insertedCallback())),logFlags.dom&&console.groupEnd())}function h(t){c(t),i(t,function(t){c(t)})}function c(t){(t.removedCallback||t.__upgraded__&&logFlags.dom)&&(logFlags.dom&&console.log("removed:",t.localName),u(t)||(t.__inserted=(t.__inserted||0)-1,t.__inserted>0&&(t.__inserted=0),0>t.__inserted?logFlags.dom&&console.warn("removed:",t.localName,"insert/remove count:",t.__inserted):t.removedCallback&&t.removedCallback()))}function u(t){for(var e=t;e;){if(e==t.ownerDocument)return!0;e=e.parentNode||e.host}}function d(t){t.webkitShadowRoot&&!t.webkitShadowRoot.__watched&&(logFlags.dom&&console.log("watching shadow-root for: ",t.localName),g(t.webkitShadowRoot),t.webkitShadowRoot.__watched=!0)}function p(t){d(t),i(t,function(){d(t)})}function m(t){switch(t.localName){case"style":case"script":case"template":case void 0:return!0}}function f(t){if(logFlags.dom){var e=t[0];if(e&&"childList"===e.type&&e.addedNodes&&e.addedNodes){for(var i=e.addedNodes[0];i&&i!==document&&!i.host;)i=i.parentNode;var n=i&&(i.URL||i._URL||i.host&&i.host.localName)||"";n=n.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",t.length,n||"")}t.forEach(function(t){"childList"===t.type&&(L(t.addedNodes,function(t){m(t)||s(t)}),L(t.removedNodes,function(t){m(t)||h(t)}))}),logFlags.dom&&console.groupEnd()}function _(){f(w.takeRecords())}function g(t){w.observe(t,{childList:!0,subtree:!0})}function v(t){g(t)}function y(t){logFlags.dom&&console.group("upgradeDocument: ",(t.URL||t._URL||"").split("/").pop()),s(t),logFlags.dom&&console.groupEnd()}var w=new MutationObserver(f),L=Array.prototype.forEach.call.bind(Array.prototype.forEach);t.watchShadow=d,t.watchAllShadows=p,t.upgradeAll=s,t.upgradeSubtree=o,t.observeDocument=v,t.upgradeDocument=y,t.takeRecords=_}(window.CustomElements),function(){function parseElementElement(t){var e={name:"","extends":null};takeAttributes(t,e);var i=HTMLElement.prototype;if(e.extends){var n=document.createElement(e.extends);i=n.__proto__||Object.getPrototypeOf(n)}e.prototype=Object.create(i),t.options=e;var o=t.querySelector('script:not([type]),script[type="text/javascript"],scripts');o&&executeComponentScript(o.textContent,t,e.name);var s=document.register(e.name,e);t.ctor=s;var r=t.getAttribute("constructor");r&&(window[r]=s)}function takeAttributes(t,e){for(var i in e){var n=t.attributes[i];n&&(e[i]=n.value)}}function executeComponentScript(inScript,inContext,inName){context=inContext;var owner=context.ownerDocument,url=owner._URL||owner.URL||owner.impl&&(owner.impl._URL||owner.impl.URL),match=url.match(/.*\/([^.]*)[.]?.*$/);if(match){var name=match[1];url+=name!=inName?":"+inName:""}var code="__componentScript('"+inName+"', function(){"+inScript+"});"+"\n//# sourceURL="+url+"\n";eval(code)}function mixin(t,e){t=t||{};try{Object.getOwnPropertyNames(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)})}catch(i){}return t}var HTMLElementElement=function(t){return t.register=HTMLElementElement.prototype.register,parseElementElement(t),t};HTMLElementElement.prototype={register:function(t){t&&(this.options.lifecycle=t.lifecycle,t.prototype&&mixin(this.options.prototype,t.prototype))}};var context;window.__componentScript=function(t,e){e.call(context)},window.HTMLElementElement=HTMLElementElement}(),function(t){function e(t){return n(t,l)}function i(t){return n(t,h)}function n(t,e){return"link"===t.localName&&t.getAttribute("rel")===e}function o(t){return"script"===t.localName}function s(t,e){var i=document.implementation.createHTMLDocument(l);i._URL=e;var n=i.createElement("base");return n.setAttribute("href",document.baseURI),i.head.appendChild(n),i.body.innerHTML=t,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(i),i}t||(t=window.HTMLImports={flags:{}});var r,a=t.xhr,l="import",h="stylesheet",c={documents:{},cache:{},preloadSelectors:["link[rel="+l+"]","element link[rel="+h+"]","template","script[src]","script:not([type])",'script[type="text/javascript"]'].join(","),loader:function(t){return r=new u(c.loaded,t),r.cache=c.cache,r},load:function(t,e){r=c.loader(e),c.preload(t)},preload:function(t){var e=t.querySelectorAll(c.preloadSelectors);e=this.filterMainDocumentNodes(t,e),e=this.extractTemplateNodes(e),r.addNodes(e)},filterMainDocumentNodes:function(t,e){return t===document&&(e=Array.prototype.filter.call(e,function(t){return!o(t)})),e},extractTemplateNodes:function(t){var e=[];return t=Array.prototype.filter.call(t,function(t){if("template"===t.localName){if(t.content){var i=t.content.querySelectorAll("link[rel="+h+"]");i.length&&(e=e.concat(Array.prototype.slice.call(i,0)))}return!1}return!0}),e.length&&(t=t.concat(e)),t},loaded:function(t,n,o){if(e(n)){var r=c.documents[t];r||(r=s(o,t),f.resolvePathsInHTML(r.body),c.documents[t]=r,c.preload(r)),n.import={href:t,ownerNode:n,content:r},n.content=o=r}n.__resource=o,i(n)&&f.resolvePathsInStylesheet(n)}},u=function(t,e){this.onload=t,this.oncomplete=e,this.inflight=0,this.pending={},this.cache={}};u.prototype={addNodes:function(t){this.inflight+=t.length,_(t,this.require,this),this.checkDone()},require:function(t){var e=f.nodeUrl(t);t.__nodeUrl=e,this.dedupe(e,t)||this.fetch(e,t)},dedupe:function(t,e){return this.pending[t]?(this.pending[t].push(e),!0):this.cache[t]?(this.onload(t,e,r.cache[t]),this.tail(),!0):(this.pending[t]=[e],!1)},fetch:function(t,e){var i=function(i,n){this.receive(t,e,i,n)}.bind(this);a.load(t,i)},receive:function(t,e,i,n){i||(r.cache[t]=n),r.pending[t].forEach(function(e){i||this.onload(t,e,n),this.tail()},this),r.pending[t]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}};var d=["href","src","action"],p="["+d.join("],[")+"]",m="{{.*}}",f={nodeUrl:function(t){return f.resolveUrl(f.getDocumentUrl(document),f.hrefOrSrc(t))},hrefOrSrc:function(t){return t.getAttribute("href")||t.getAttribute("src")},documentUrlFromNode:function(t){return f.getDocumentUrl(t.ownerDocument)},getDocumentUrl:function(t){var e=t&&(t._URL||t.impl&&t.impl._URL||t.baseURI||t.URL)||"";return e.split("#")[0]},resolveUrl:function(t,e,i){if(this.isAbsUrl(e))return e;var n=this.compressUrl(this.urlToPath(t)+e);return i&&(n=f.makeRelPath(f.getDocumentUrl(document),n)),n},isAbsUrl:function(t){return/(^data:)|(^http[s]?:)|(^\/)/.test(t)},urlToPath:function(t){var e=t.split("/");return e.pop(),e.push(""),e.join("/")},compressUrl:function(t){for(var e,i=t.split("/"),n=0;i.length>n;n++)e=i[n],".."===e&&(i.splice(n-1,2),n-=2);return i.join("/")},makeRelPath:function(t,e){var i,n;for(i=this.compressUrl(t).split("/"),n=this.compressUrl(e).split("/");i.length&&i[0]===n[0];)i.shift(),n.shift();for(var o=0,s=i.length-1;s>o;o++)n.unshift("..");var r=n.join("/");return r},resolvePathsInHTML:function(t,e){e=e||f.documentUrlFromNode(t),f.resolveAttributes(t,e),f.resolveStyleElts(t,e);var i=t.querySelectorAll("template");i&&_(i,function(t){t.content&&f.resolvePathsInHTML(t.content,e)})},resolvePathsInStylesheet:function(t){var e=f.nodeUrl(t);t.__resource=f.resolveCssText(t.__resource,e)},resolveStyleElts:function(t,e){var i=t.querySelectorAll("style");i&&_(i,function(t){t.textContent=f.resolveCssText(t.textContent,e)})},resolveCssText:function(t,e){return t.replace(/url\([^)]*\)/g,function(t){var i=t.replace(/["']/g,"").slice(4,-1);return i=f.resolveUrl(e,i,!0),"url("+i+")"})},resolveAttributes:function(t,e){var i=t&&t.querySelectorAll(p);i&&_(i,function(t){this.resolveNodeAttributes(t,e)},this)},resolveNodeAttributes:function(t,e){d.forEach(function(i){var n=t.attributes[i];if(n&&n.value&&0>n.value.search(m)){var o=f.resolveUrl(e,n.value,!0);n.value=o}})}};a=a||{async:!0,ok:function(t){return t.status>=200&&300>t.status||304===t.status||0===t.status},load:function(e,i,n){var o=new XMLHttpRequest;(t.flags.debug||t.flags.bust)&&(e+="?"+Math.random()),o.open("GET",e,a.async),o.addEventListener("readystatechange",function(){4===o.readyState&&i.call(n,!a.ok(o)&&o,o.response,e)}),o.send()}};var _=Array.prototype.forEach.call.bind(Array.prototype.forEach);t.path=f,t.xhr=a,t.importer=c,t.getDocumentUrl=f.getDocumentUrl,t.IMPORT_LINK_TYPE=l}(window.HTMLImports),function(t){function e(t){return"link"===t.localName&&t.getAttribute("rel")===s}function i(t){return t.parentNode&&!n(t)&&!o(t)}function n(t){return t.ownerDocument===document||t.ownerDocument.impl===document}function o(t){return t.parentNode&&"element"===t.parentNode.localName}var s="import",r={selectors:["link[rel="+s+"]","link[rel=stylesheet]","style","script"],map:{link:"parseLink",script:"parseScript",style:"parseGeneric"},parse:function(t){if(!t.__importParsed){t.__importParsed=!0;var e=t.querySelectorAll(r.selectors);a(e,function(t){r[r.map[t.localName]](t)})}},parseLink:function(t){e(t)?t.content&&r.parse(t.content):this.parseGeneric(t)},parseGeneric:function(t){i(t)&&document.head.appendChild(t)},parseScript:function(e){if(i(e)){var n=(e.__resource||e.textContent).trim();if(n){var o=e.__nodeUrl;if(!o){var o=t.path.documentUrlFromNode(e),s="["+Math.floor(1e3*(Math.random()+1))+"]",r=n.match(/Polymer\(['"]([^'"]*)/);s=r&&r[1]||s,o+="/"+s+".js"}n+="\n//# sourceURL="+o+"\n",eval.call(window,n)}}}},a=Array.prototype.forEach.call.bind(Array.prototype.forEach);t.parser=r}(HTMLImports),function(){function t(){HTMLImports.importer.load(document,function(){HTMLImports.parser.parse(document),HTMLImports.readyTime=(new Date).getTime(),document.dispatchEvent(new CustomEvent("HTMLImportsLoaded",{bubbles:!0}))})}"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t){var e=document.createEvent("HTMLEvents");return e.initEvent(t,!0,!0),e}),"complete"===document.readyState?t():window.addEventListener("DOMContentLoaded",t)}(),function(){function t(t){return"link"===t.localName&&t.getAttribute("rel")===e}var e=window.HTMLImports?HTMLImports.IMPORT_LINK_TYPE:"none",i={selectors:["link[rel="+e+"]","element"],map:{link:"parseLink",element:"parseElement"},parse:function(t){if(!t.__parsed){t.__parsed=!0;var e=t.querySelectorAll(i.selectors);n(e,function(t){i[i.map[t.localName]](t)}),CustomElements.upgradeDocument(t),CustomElements.observeDocument(t)}},parseLink:function(e){t(e)&&this.parseImport(e)},parseImport:function(t){t.content&&i.parse(t.content)},parseElement:function(t){new HTMLElementElement(t)}},n=Array.prototype.forEach.call.bind(Array.prototype.forEach);CustomElements.parser=i}(),function(){function t(){setTimeout(function(){CustomElements.parser.parse(document),CustomElements.upgradeDocument(document),CustomElements.ready=!0,CustomElements.readyTime=Date.now(),window.HTMLImports&&(CustomElements.elapsed=CustomElements.readyTime-HTMLImports.readyTime),document.body.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))},0)}if("function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t){var e=document.createEvent("HTMLEvents");return e.initEvent(t,!0,!0),e}),"complete"===document.readyState)t();else{var e=window.HTMLImports?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(e,t)}}(),function(){function t(t){return T.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function e(i,n){var o=e[n||t(i)];return o?o(i):i}function i(e){return-1==M.indexOf(t(e))?Array.prototype.slice.call(e,0):[e]}function n(t,e){return(e||C).length?i(t.querySelectorAll(e)):[]}function o(t,e){var i={added:[],removed:[]};e.forEach(function(e){e._mutation=!0;for(var n in i)for(var o=t._records["added"==n?"inserted":"removed"],s=e[n+"Nodes"],r=s.length,a=0;r>a&&-1==i[n].indexOf(s[a]);a++)i[n].push(s[a]),o.forEach(function(t){t(s[a],e)})})}function s(i,n,o){var s=t(o);return"object"==s&&"object"==t(i[n])?S.merge(i[n],o):i[n]=e(o,s),i}function r(t,e,i){var n={};for(var o in i)n[o.split(":")[0]]=!0;for(var s in e)n[s.split(":")[0]]||(i[s]=e[s])}function a(t){return t.mixins.forEach(function(e){var i=S.mixins[e];for(var n in i)switch(n){case"lifecycle":case"methods":r(n,i[n],t[n]);break;case"accessors":case"prototype":for(var o in i[n])r(o,i[n],t.accessors);break;case"events":}}),t}function l(t,e){var i;return t.listener.touched?(t.listener.touched=!1,i=!1):e.type.match("touch")&&(t.listener.touched=!0),i}function h(t){var e="over"==t;return{base:"OverflowEvent"in g?"overflowchanged":t+"flow",condition:function(i,n){return n.flow=t,n.type==t+"flow"||0===n.orient&&n.horizontalOverflow==e||1==n.orient&&n.verticalOverflow==e||2==n.orient&&n.horizontalOverflow==e&&n.verticalOverflow==e}}}function c(t,e){return{value:t.boolean?"":e,method:!t.boolean||e!==!1&&null!==e?"setAttribute":"removeAttribute"}}function u(t,e,i){var n=c(t,i);this[n.method](e,n.value)}function d(t,e,i){for(var n=c(t,i),o=t.property?[this.xtag[t.property]]:t.selector?S.query(this,t.selector):[],s=o.length;s--;)o[s][n.method](e,n.value)}function p(t,e){var i=t.prototype[e]||HTMLElement.prototype[e];t.prototype[e]={writable:!0,enumberable:!0,value:function(n,o){var s=t.attributes[n.toLowerCase()];i.call(this,n,s&&s.boolean?"":o),s&&(d.call(this,s,n,o),s.skip||this.xtag._skipAttr||s.setter.call(this,s.boolean?"setAttribute"==e:this.getAttribute(n)),delete this.xtag._skipAttr)}}}function m(t,e,i){t.template&&t.xtag.template.updateBindingValue(t,e,i)}function f(t,e,i,n,o,s){var r=i.split(":"),a=r[0];"get"==a?(r[0]=e,t.prototype[e].get=S.applyPseudos(r.join(":"),n[i],t.pseudos)):"set"==a?(r[0]=e,o&&(o.setter=n[i]),t.prototype[e].set=S.applyPseudos(r.join(":"),o?function(t,e){d.call(this,o,s,t),n[i].call(this,t),e||o.skip||(this.xtag._skipAttr=!0,u.call(this,o,s,t)),m(this,s,t)}:n[i]?function(t){n[i].call(this,t),m(this,s,t)}:null,t.pseudos)):t.prototype[e][i]=n[i]}function _(t,e){t.prototype[e]={};var i=t.accessors[e],n=i.attribute,o=n&&n.name?n.name.toLowerCase():e;n&&(t.attributes[o]=n);for(var s in i)f(t,e,s,i,n,o);if(n){if(!t.prototype[e].get){var r=(n.boolean?"has":"get")+"Attribute";t.prototype[e].get=function(){return this[r](o)}}t.prototype[e].set||(t.prototype[e].set=function(t){this.xtag._skipAttr=!0,u.call(this,n,o,t),m(this,o,t)})}}var g=window,v=document,y=function(){},w=/([\w-]+(?:\([^\)]+\))?)/g,L=/(\w*)(?:\(([^\)]*)\))?/,b=/(\d+)/g,x={action:function(t,e){return t.value.match(b).indexOf(e.keyCode+"")>-1==("keypass"==t.name)}},P=function(){var t=g.getComputedStyle(v.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return{dom:"ms"==e?e.toUpperCase():e,lowercase:e,css:"-"+e+"-",js:"ms"==e?e:e[0].toUpperCase()+e.substr(1)}}(),E=Element.prototype.matchesSelector||Element.prototype[P.lowercase+"MatchesSelector"],T={};e.object=function(t){var i={};for(var n in t)i[n]=e(t[n]);return i},e.array=function(t){for(var i=t.length,n=Array(i);i--;)n[i]=e(t[i]);return n};var M=["number","boolean","string","function"],C="",S={tags:{},defaultOptions:{pseudos:[],mixins:[],events:{},methods:{},accessors:{template:{attribute:{},set:function(t){var e=this.getAttribute("template");this.xtag.__previousTemplate__=e,S.fireEvent(this,"templatechange",{template:t})}}},lifecycle:{},attributes:{},prototype:{xtag:{get:function(){return this.__xtag__?this.__xtag__:this.__xtag__={data:{}}}}}},register:function(t,e){var n,o;if("string"==typeof t)o=t.toLowerCase();else{if("ELEMENT"!=t.nodeName)return;n=t,o=n.getAttribute("name").toLowerCase()}var s=S.tags[o]=a(S.merge({},S.defaultOptions,e));for(var r in s.events)s.events[r]=S.parseEvent(r,s.events[r]);for(r in s.lifecycle)s.lifecycle[r.split(":")[0]]=S.applyPseudos(r,s.lifecycle[r],s.pseudos);for(r in s.methods)s.prototype[r.split(":")[0]]={value:S.applyPseudos(r,s.methods[r],s.pseudos),enumerable:!0};for(r in s.accessors)_(s,r);var l=s.lifecycle.created||s.lifecycle.ready;return s.prototype.readyCallback={enumerable:!0,value:function(){var t=this,e=t.getAttribute("template");e&&S.fireEvent(this,"templatechange",{template:e}),S.addEvents(this,s.events),s.mixins.forEach(function(e){S.mixins[e].events&&S.addEvents(t,S.mixins[e].events)});var n=l?l.apply(this,i(arguments)):null;for(var o in s.attributes){var r=s.attributes[o],a=this.hasAttribute(o),h=r.boolean?a:this.getAttribute(o);(r.boolean||a)&&(d.call(this,r,o,h),r.setter&&r.setter.call(this,h,!0))}return s.pseudos.forEach(function(e){e.onAdd.call(t,e)}),n}},s.lifecycle.inserted&&(s.prototype.insertedCallback={value:s.lifecycle.inserted,enumerable:!0}),s.lifecycle.removed&&(s.prototype.removedCallback={value:s.lifecycle.removed,enumerable:!0}),s.lifecycle.attributeChanged&&(s.prototype.attributeChangedCallback={value:s.lifecycle.attributeChanged,enumerable:!0}),p(s,"setAttribute"),p(s,"removeAttribute"),n?(n.register({prototype:Object.create(Object.prototype,s.prototype)}),void 0):v.register(o,{"extends":e["extends"],prototype:Object.create(Object.create((e["extends"]?document.createElement(e["extends"]).constructor:g.HTMLElement).prototype,s.prototype),s.prototype)})},mixins:{},prefix:P,templates:{},captureEvents:["focus","blur"],customEvents:{overflow:h("over"),underflow:h("under"),animationstart:{base:["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"]},transitionend:{base:["transitionend","oTransitionEnd","MSTransitionEnd","webkitTransitionEnd"]},tap:{base:["click","touchend"],condition:l},tapstart:{base:["mousedown","touchstart"],condition:l},tapend:{base:["mouseup","touchend"],condition:l},tapenter:{base:["mouseover","touchenter"],condition:l},tapleave:{base:["mouseout","touchleave"],condition:l},tapmove:{base:["mousemove","touchmove"],condition:l}},pseudos:{keypass:x,keyfail:x,delegate:{action:function(t,e){var i=n(this,t.value).filter(function(t){return t==e.target||t.contains?t.contains(e.target):!1})[0];return i?t.listener=t.listener.bind(i):!1}},preventable:{action:function(t,e){return!e.defaultPrevented}}},clone:e,typeOf:t,toArray:i,wrap:function(t,e){return function(){var n=i(arguments),o=t.apply(this,n);return o===!1?!1:e.apply(this,o!==void 0?i(o):n)}},merge:function(e,i,n){if("string"==t(i))return s(e,i,n);for(var o=1,r=arguments.length;r>o;o++){var a=arguments[o];for(var l in a)s(e,l,a[l])}return e},uid:function(){return Math.random().toString(36).substr(2,10)},query:n,skipTransition:function(t,e,i){var n=P.js+"TransitionProperty";t.style[n]=t.style.transitionProperty="none",S.requestFrame(function(){var o;e&&(o=e.call(i)),S.requestFrame(function(){t.style[n]=t.style.transitionProperty="",o&&S.requestFrame(o)})})},requestFrame:function(){var t=g.requestAnimationFrame||g[P.lowercase+"RequestAnimationFrame"]||function(t){return g.setTimeout(t,20)};return function(e){return t.call(g,e)}}(),matchSelector:function(t,e){return E.call(t,e)},set:function(t,e,i){t[e]=i,window.CustomElements&&CustomElements.upgradeAll(t)},innerHTML:function(t,e){S.set(t,"innerHTML",e)},hasClass:function(t,e){return t.className.split(" ").indexOf(e.trim())>-1},addClass:function(t,e){var i=t.className.trim().split(" ");return e.trim().split(" ").forEach(function(t){~i.indexOf(t)||i.push(t)}),t.className=i.join(" ").trim(),t},removeClass:function(t,e){var i=e.trim().split(" ");return t.className=t.className.trim().split(" ").filter(function(t){return t&&!~i.indexOf(t)}).join(" "),t},toggleClass:function(t,e){return S[S.hasClass(t,e)?"removeClass":"addClass"].call(null,t,e)},queryChildren:function(t,e){var n=t.id,o=t.id=n||"x_"+S.uid(),s="#"+o+" > ";e=s+(e+"").replace(",",","+s,"g");var r=t.parentNode.querySelectorAll(e);return n||t.removeAttribute("id"),i(r)},createFragment:function(t){var e=v.createDocumentFragment();if(t){for(var n=e.appendChild(v.createElement("div")),o=i(t.nodeName?arguments:!(n.innerHTML=t)||n.children),s=o.length,r=0;s>r;)e.insertBefore(o[r++],n);e.removeChild(n)}return e},manipulate:function(t,e){var i=t.nextSibling,n=t.parentNode,o=v.createDocumentFragment(),s=e.call(o.appendChild(t),o)||t;i?n.insertBefore(s,i):n.appendChild(s)},applyPseudos:function(t,e,n){var o=e,s={};if(t.match(":"))for(var r=t.match(w),a=r.length;--a;)r[a].replace(L,function(e,l,h){if(!S.pseudos[l])throw"pseudo not found: "+l+" "+r;var c=s[a]=Object.create(S.pseudos[l]);c.key=t,c.name=l,c.value=h;var u=o;o=function(){var e=i(arguments),n={key:t,name:l,value:h,listener:u};return c.action&&c.action.apply(this,[n].concat(e))===!1?!1:n.listener.apply(this,e)},n&&c.onAdd&&(n.getAttribute?c.onAdd.call(n,c):n.push(c))});for(var l in s)s[l].onCompiled&&(o=s[l].onCompiled(o,s[l]));return o},removePseudos:function(t,e){e._pseudos.forEach(function(e){e.onRemove.call(t,e)})},parseEvent:function(t,e){var n=t.split(":"),o=n.shift(),s=S.merge({base:o,pseudos:"",_pseudos:[],onAdd:y,onRemove:y,condition:y},S.customEvents[o]||{});if(s.type=o+(s.pseudos.length?":"+s.pseudos:"")+(n.length?":"+n.join(":"):""),e){var r=S.applyPseudos(s.type,e,s._pseudos);s.listener=function(){var t=i(arguments);return s.condition.apply(this,[s].concat(t))===!1?!1:r.apply(this,t)}}return s},addEvent:function(t,e,n){var o="function"==typeof n?S.parseEvent(e,n):n;return o.listener.event=o,o._pseudos.forEach(function(e){e.onAdd.call(t,e)}),o.onAdd.call(t,o,o.listener),i(o.base).forEach(function(e){t.addEventListener(e,o.listener,S.captureEvents.indexOf(e)>-1)}),o.listener},addEvents:function(t,e){var i={};for(var n in e)i[n]=S.addEvent(t,n,e[n]);return i},removeEvent:function(t,e,n){var o=n.event;o.onRemove.call(t,o,n),S.removePseudos(t,o),i(o.base).forEach(function(e){t.removeEventListener(e,n)})},removeEvents:function(t,e){for(var i in e)S.removeEvent(t,i,e[i])},fireEvent:function(t,e,i,n){n=n||{};var o=v.createEvent("Event");o.initEvent(e,"bubbles"in n?n.bubbles:!0,"cancelable"in n?n.cancelable:!0);for(var s in i)o[s]=i[s];t.dispatchEvent(o)},addObserver:function(t,e,i){t._records||(t._records={inserted:[],removed:[]},mutation?(t._observer=new mutation(function(e){o(t,e)}),t._observer.observe(t,{subtree:!0,childList:!0,attributes:!!0,characterData:!1})):["Inserted","Removed"].forEach(function(e){t.addEventListener("DOMNode"+e,function(i){i._mutation=!0,t._records[e.toLowerCase()].forEach(function(t){t(i.target,i)})},!1)})),-1==t._records[e].indexOf(i)&&t._records[e].push(i)},removeObserver:function(t,e,i){var n=t._records;n&&i?n[e].splice(n[e].indexOf(i),1):n[e]=[]
}};"function"==typeof define&&define.amd?define(S):g.xtag=S,v.addEventListener("WebComponentsReady",function(){S.fireEvent(v.body,"DOMComponentsLoaded")})}(),function(){var t=/\blang(?:uage)?-(?!\*)(\w+)\b/i,e=self.Prism={util:{type:function(t){return Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1]},clone:function(t){var i=e.util.type(t);switch(i){case"Object":var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=e.util.clone(t[o]));return n;case"Array":return t.slice()}return t}},languages:{extend:function(t,i){var n=e.util.clone(e.languages[t]);for(var o in i)n[o]=i[o];return n},insertBefore:function(t,i,n,o){o=o||e.languages;var s=o[t],r={};for(var a in s)if(s.hasOwnProperty(a)){if(a==i)for(var l in n)n.hasOwnProperty(l)&&(r[l]=n[l]);r[a]=s[a]}return o[t]=r},DFS:function(t,i){for(var n in t)i.call(t,n,t[n]),"Object"===e.util.type(t)&&e.languages.DFS(t[n],i)}},highlightAll:function(t,i){for(var n,o=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),s=0;n=o[s++];)e.highlightElement(n,t===!0,i)},highlightElement:function(n,o,s){for(var r,a,l=n;l&&!t.test(l.className);)l=l.parentNode;if(l&&(r=(l.className.match(t)||[,""])[1],a=e.languages[r]),a){n.className=n.className.replace(t,"").replace(/\s+/g," ")+" language-"+r,l=n.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(t,"").replace(/\s+/g," ")+" language-"+r);var h=n.textContent;if(h){h=h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var c={element:n,language:r,grammar:a,code:h};if(e.hooks.run("before-highlight",c),o&&self.Worker){var u=new Worker(e.filename);u.onmessage=function(t){c.highlightedCode=i.stringify(JSON.parse(t.data)),c.element.innerHTML=c.highlightedCode,s&&s.call(c.element),e.hooks.run("after-highlight",c)},u.postMessage(JSON.stringify({language:c.language,code:c.code}))}else c.highlightedCode=e.highlight(c.code,c.grammar),c.element.innerHTML=c.highlightedCode,s&&s.call(n),e.hooks.run("after-highlight",c)}}},highlight:function(t,n){return i.stringify(e.tokenize(t,n))},tokenize:function(t,i){var n=e.Token,o=[t],s=i.rest;if(s){for(var r in s)i[r]=s[r];delete i.rest}t:for(var r in i)if(i.hasOwnProperty(r)&&i[r]){var a=i[r],l=a.inside,h=!!a.lookbehind||0;a=a.pattern||a;for(var c=0;o.length>c;c++){var u=o[c];if(o.length>t.length)break t;if(!(u instanceof n)){a.lastIndex=0;var d=a.exec(u);if(d){h&&(h=d[1].length);var p=d.index-1+h,d=d[0].slice(h),m=d.length,f=p+m,_=u.slice(0,p+1),g=u.slice(f+1),v=[c,1];_&&v.push(_);var y=new n(r,l?e.tokenize(d,l):d);v.push(y),g&&v.push(g),Array.prototype.splice.apply(o,v)}}}}return o},hooks:{all:{},add:function(t,i){var n=e.hooks.all;n[t]=n[t]||[],n[t].push(i)},run:function(t,i){var n=e.hooks.all[t];if(n&&n.length)for(var o,s=0;o=n[s++];)o(i)}}},i=e.Token=function(t,e){this.type=t,this.content=e};if(i.stringify=function(t){if("string"==typeof t)return t;if("[object Array]"==Object.prototype.toString.call(t)){for(var n=0;t.length>n;n++)t[n]=i.stringify(t[n]);return t.join("")}var o={type:t.type,content:i.stringify(t.content),tag:"span",classes:["token",t.type],attributes:{}};"comment"==o.type&&(o.attributes.spellcheck="true"),e.hooks.run("wrap",o);var s="";for(var r in o.attributes)s+=r+'="'+(o.attributes[r]||"")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'" '+s+">"+o.content+"</"+o.tag+">"},!self.document)return self.addEventListener("message",function(t){var i=JSON.parse(t.data),n=i.language,o=i.code;self.postMessage(JSON.stringify(e.tokenize(o,e.languages[n]))),self.close()},!1),void 0;var n=document.getElementsByTagName("script");n=n[n.length-1],n&&(e.filename=n.src,document.addEventListener&&!n.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",e.highlightAll))}(),Prism.languages.markup={comment:/&lt;!--[\w\W]*?--(&gt;|&gt;)/g,prolog:/&lt;\?.+?\?&gt;/,doctype:/&lt;!DOCTYPE.+?&gt;/,cdata:/&lt;!\[CDATA\[[\w\W]+?]]&gt;/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?&gt;/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|&gt;|"/g}},punctuation:/\/?&gt;/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi},Prism.hooks.add("wrap",function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))}),Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:/@[\w-]+?(\s+[^;{]+)?(?=\s*{|\s*;)/gi,url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,property:/(\b|\B)[a-z-]+(?=\s*:)/gi,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g},Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}}),Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b(-?(0x)?\d*\.?[\da-f]+|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),xtag.register("x-code-prism",{lifecycle:{created:function(){this.codeContent=this.innerHTML.match(/&lt;/)?this.innerHTML:this.textContent}},accessors:{codeContent:{set:function(t){this.innerHTML='<pre><code class="language-'+(this.getAttribute("language")||"javascript")+'">'+t+"</code></pre>",Prism.highlightElement(this.firstChild.firstChild,!1)}}}}),function(){xtag.register("x-flipbox",{lifecycle:{created:function(){this.flipped?xtag.skipTransition(this.firstElementChild,function(){}):xtag.skipTransition(this.lastElementChild,function(){})}},events:{transitionend:function(t){t.target==this&&xtag.fireEvent(this,"flipend")}},accessors:{direction:{get:function(){return this.getAttribute("direction")},set:function(t){xtag.skipTransition(this.firstElementChild,function(){this.setAttribute("direction",t)},this),xtag.skipTransition(this.lastElementChild,function(){this.setAttribute("direction",t)},this)}},flipped:{attribute:{"boolean":!0}}},methods:{toggle:function(){this.flipped=!this.flipped}}})}(),function(){xtag.register("x-growbox",{lifecycle:{created:function(){var t=xtag.toArray(this.children),e=xtag.createFragment(this.templateHTML),i=e.querySelector(".x-grow-content");t.forEach(function(t){i.appendChild(t)}),this.appendChild(e),xtag.addEvent(this.firstElementChild.firstElementChild.nextElementSibling,"overflow",this.matchDimensions.bind(this)),xtag.addEvent(this.firstElementChild.lastElementChild,"underflow",this.matchDimensions.bind(this)),this.matchDimensions()}},prototype:{templateHTML:{value:'<div class="x-grow-wrap" onresize="this.parentNode.matchDimensions.call(this.parentNode)"><div class="x-grow-content"></div><div class="x-grow-overflow"><div></div></div><div class="x-grow-underflow"><div></div></div></div>'}},methods:{matchDimensions:function(t){var e=this.firstElementChild;return e&&"x-grow-wrap"==e.className?(this.style.height=t===!0?window.getComputedStyle(e).height:e.scrollHeight+"px",e.firstElementChild.nextElementSibling.firstChild.style.height=e.scrollHeight-1+"px",e.lastElementChild.firstChild.style.height=e.scrollHeight+1+"px",void 0):!1}},events:{overflow:function(){this.matchDimensions()},underflow:function(){this.matchDimensions()}}})}(),function(){(function(){var t,e;"undefined"!=typeof exports?t=exports:(t={},e=window.L,t.noConflict=function(){return window.L=e,t},window.L=t),t.version="0.4",t.Util={extend:function(t){for(var e,i=Array.prototype.slice.call(arguments,1),n=0,o=i.length;o>n;n++){e=i[n]||{};for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),requestAnimFrame:function(){function e(t){window.setTimeout(t,1e3/60)}var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||e;return function(n,o,s,r){return n=o?t.Util.bind(n,o):n,s&&i===e?(n(),void 0):i.call(window,n,r)}}(),cancelAnimFrame:function(){var t=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;return function(e){return e?t.call(window,e):void 0}}(),limitExecByInterval:function(t,e,i){var n,o;return function s(){var r=arguments;return n?(o=!0,void 0):(n=!0,setTimeout(function(){n=!1,o&&(s.apply(i,r),o=!1)},e),t.apply(i,r),void 0)}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},setOptions:function(e,i){return e.options=t.Util.extend({},e.options,i),e.options},getParamString:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return"?"+e.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var n=e[i];if(!e.hasOwnProperty(i))throw Error("No value provided for variable "+t);return n})},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},t.Class=function(){},t.Class.extend=function(e){var i=function(){this.initialize&&this.initialize.apply(this,arguments)},n=function(){};n.prototype=this.prototype;var o=new n;o.constructor=i,i.prototype=o;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(i[s]=this[s]);return e.statics&&(t.Util.extend(i,e.statics),delete e.statics),e.includes&&(t.Util.extend.apply(null,[o].concat(e.includes)),delete e.includes),e.options&&o.options&&(e.options=t.Util.extend({},o.options,e.options)),t.Util.extend(o,e),i},t.Class.include=function(e){t.Util.extend(this.prototype,e)},t.Class.mergeOptions=function(e){t.Util.extend(this.prototype.options,e)},t.Mixin={},t.Mixin.Events={addEventListener:function(t,e,i){var n=this._leaflet_events=this._leaflet_events||{};return n[t]=n[t]||[],n[t].push({action:e,context:i||this}),this},hasEventListeners:function(t){var e="_leaflet_events";return e in this&&t in this[e]&&this[e][t].length>0},removeEventListener:function(t,e,i){if(!this.hasEventListeners(t))return this;for(var n=0,o=this._leaflet_events,s=o[t].length;s>n;n++)if(o[t][n].action===e&&(!i||o[t][n].context===i))return o[t].splice(n,1),this;return this},fireEvent:function(e,i){if(!this.hasEventListeners(e))return this;for(var n=t.Util.extend({type:e,target:this},i),o=this._leaflet_events[e].slice(),s=0,r=o.length;r>s;s++)o[s].action.call(o[s].context||this,n);return this}},t.Mixin.Events.on=t.Mixin.Events.addEventListener,t.Mixin.Events.off=t.Mixin.Events.removeEventListener,t.Mixin.Events.fire=t.Mixin.Events.fireEvent,function(){var e=navigator.userAgent.toLowerCase(),i=!!window.ActiveXObject,n=-1!==e.indexOf("webkit"),o="undefined"!=typeof orientation?!0:!1,s=-1!==e.indexOf("android"),r=window.opera;t.Browser={ie:i,ie6:i&&!window.XMLHttpRequest,webkit:n,webkit3d:n&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix,gecko:-1!==e.indexOf("gecko"),opera:r,android:s,mobileWebkit:o&&n,mobileOpera:o&&r,mobile:o,touch:function(){var t=!1,e="ontouchstart";if(e in document.documentElement)return!0;var i=document.createElement("div");return i.setAttribute&&i.removeAttribute?(i.setAttribute(e,"return;"),"function"==typeof i[e]&&(t=!0),i.removeAttribute(e),i=null,t):!1}()}}(),t.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},t.Point.prototype={add:function(t){return this.clone()._add(t)},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(t)},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(e,i){return new t.Point(this.x/e,this.y/e,i)},multiplyBy:function(e){return new t.Point(this.x*e,this.y*e)},distanceTo:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},clone:function(){return new t.Point(this.x,this.y)},toString:function(){return"Point("+t.Util.formatNum(this.x)+", "+t.Util.formatNum(this.y)+")"}},t.Bounds=t.Class.extend({initialize:function(t,e){if(t)for(var i=t instanceof Array?t:[t,e],n=0,o=i.length;o>n;n++)this.extend(i[n])},extend:function(e){this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=new t.Point(e.x,e.y),this.max=new t.Point(e.x,e.y))},getCenter:function(e){return new t.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},contains:function(e){var i,n;return e instanceof t.Bounds?(i=e.min,n=e.max):i=n=e,i.x>=this.min.x&&n.x<=this.max.x&&i.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>=e.x&&n.x<=i.x,r=o.y>=e.y&&n.y<=i.y;return s&&r}}),t.Transformation=t.Class.extend({initialize:function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(e,i){return i=i||1,new t.Point((e.x/i-this._b)/this._a,(e.y/i-this._d)/this._c)}}),t.DomUtil={get:function(t){return"string"==typeof t?document.getElementById(t):t},getStyle:function(t,e){var i=t.style[e];if(!i&&t.currentStyle&&(i=t.currentStyle[e]),!i||"auto"===i){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i},getViewportOffset:function(e){var i=0,n=0,o=e,s=document.body;do{if(i+=o.offsetTop||0,n+=o.offsetLeft||0,o.offsetParent===s&&"absolute"===t.DomUtil.getStyle(o,"position"))break;if("fixed"===t.DomUtil.getStyle(o,"position")){i+=s.scrollTop||0,n+=s.scrollLeft||0;break}o=o.offsetParent}while(o);o=e;do{if(o===s)break;i-=o.scrollTop||0,n-=o.scrollLeft||0,o=o.parentNode}while(o);return new t.Point(n,i)},create:function(t,e,i){var n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty(),this._onselectstart||(this._onselectstart=document.onselectstart,document.onselectstart=t.Util.falseFn)},enableTextSelection:function(){document.onselectstart=this._onselectstart,this._onselectstart=null},hasClass:function(t,e){return t.className.length>0&&RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(e,i){t.DomUtil.hasClass(e,i)||(e.className+=(e.className?" ":"")+i)},removeClass:function(t,e){t.className=t.className.replace(/(\S+)\s*/g,function(t,i){return i===e?"":t}).replace(/^\s+/,"")},setOpacity:function(e,i){t.Browser.ie?e.style.filter+=1!==i?"alpha(opacity="+Math.round(100*i)+")":"":e.style.opacity=i},testProp:function(t){for(var e=document.documentElement.style,i=0;t.length>i;i++)if(t[i]in e)return t[i];return!1},getTranslateString:function(e){return t.DomUtil.TRANSLATE_OPEN+e.x+"px,"+e.y+"px"+t.DomUtil.TRANSLATE_CLOSE},getScaleString:function(e,i){var n=t.DomUtil.getTranslateString(i),o=" scale("+e+") ",s=t.DomUtil.getTranslateString(i.multiplyBy(-1));return n+o+s},setPosition:function(e,i){e._leaflet_pos=i,t.Browser.webkit3d?(e.style[t.DomUtil.TRANSFORM]=t.DomUtil.getTranslateString(i),e.style["-webkit-backface-visibility"]="hidden"):(e.style.left=i.x+"px",e.style.top=i.y+"px")},getPosition:function(t){return t._leaflet_pos}},t.Util.extend(t.DomUtil,{TRANSITION:t.DomUtil.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:t.DomUtil.testProp(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]),TRANSLATE_OPEN:"translate"+(t.Browser.webkit3d?"3d(":"("),TRANSLATE_CLOSE:t.Browser.webkit3d?",0)":")"}),t.LatLng=function(t,e,i){var n=parseFloat(t),o=parseFloat(e);if(isNaN(n)||isNaN(o))throw Error("Invalid LatLng object: ("+t+", "+e+")");i!==!0&&(n=Math.max(Math.min(n,90),-90),o=(o+180)%360+(-180>o||180===o?180:-180)),this.lat=n,this.lng=o},t.Util.extend(t.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),t.LatLng.prototype={equals:function(e){if(e instanceof t.LatLng){var i=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return t.LatLng.MAX_MARGIN>=i}return!1},toString:function(){return"LatLng("+t.Util.formatNum(this.lat)+", "+t.Util.formatNum(this.lng)+")"},distanceTo:function(e){var i=6378137,n=t.LatLng.DEG_TO_RAD,o=(e.lat-this.lat)*n,s=(e.lng-this.lng)*n,r=this.lat*n,a=e.lat*n,l=Math.sin(o/2),h=Math.sin(s/2),c=l*l+h*h*Math.cos(r)*Math.cos(a);return 2*i*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}},t.LatLngBounds=t.Class.extend({initialize:function(t,e){if(t)for(var i=t instanceof Array?t:[t,e],n=0,o=i.length;o>n;n++)this.extend(i[n])},extend:function(e){return e instanceof t.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new t.LatLng(e.lat,e.lng,!0),this._northEast=new t.LatLng(e.lat,e.lng,!0)):e instanceof t.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var i=this._southWest,n=this._northEast,o=Math.abs(i.lat-n.lat)*e,s=Math.abs(i.lng-n.lng)*e;return new t.LatLngBounds(new t.LatLng(i.lat-o,i.lng-s),new t.LatLng(n.lat+o,n.lng+s))},getCenter:function(){return new t.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new t.LatLng(this._northEast.lat,this._southWest.lng,!0)},getSouthEast:function(){return new t.LatLng(this._southWest.lat,this._northEast.lng,!0)},contains:function(e){var i,n,o=this._southWest,s=this._northEast;return e instanceof t.LatLngBounds?(i=e.getSouthWest(),n=e.getNorthEast()):i=n=e,i.lat>=o.lat&&n.lat<=s.lat&&i.lng>=o.lng&&n.lng<=s.lng},intersects:function(t){var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&n.lat<=i.lat,r=o.lng>=e.lng&&n.lng<=i.lng;return s&&r},toBBoxString:function(){var t=this._southWest,e=this._northEast;return[t.lng,t.lat,e.lng,e.lat].join(",")},equals:function(t){return t?this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()):!1}}),t.Projection={},t.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var i=t.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,e.lat),-n),s=e.lng*i,r=o*i;return r=Math.log(Math.tan(Math.PI/4+r/2)),new t.Point(s,r)},unproject:function(e,i){var n=t.LatLng.RAD_TO_DEG,o=e.x*n,s=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*n;return new t.LatLng(s,o,i)}},t.Projection.LonLat={project:function(e){return new t.Point(e.lng,e.lat)},unproject:function(e,i){return new t.LatLng(e.y,e.x,i)}},t.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e,i){var n=this.scale(e),o=this.transformation.untransform(t,n);return this.projection.unproject(o,i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)}},t.CRS.EPSG3857=t.Util.extend({},t.CRS,{code:"EPSG:3857",projection:t.Projection.SphericalMercator,transformation:new t.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),t.CRS.EPSG900913=t.Util.extend({},t.CRS.EPSG3857,{code:"EPSG:900913"}),t.CRS.EPSG4326=t.Util.extend({},t.CRS,{code:"EPSG:4326",projection:t.Projection.LonLat,transformation:new t.Transformation(1/360,.5,-1/360,.5)}),t.Map=t.Class.extend({includes:t.Mixin.Events,options:{crs:t.CRS.EPSG3857,fadeAnimation:t.DomUtil.TRANSITION&&!t.Browser.android,trackResize:!0},initialize:function(e,i){i=t.Util.setOptions(this,i),this._initContainer(e),this._initLayout(),this._initHooks(),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.center&&i.zoom!==void 0&&this.setView(i.center,i.zoom,!0),this._initLayers(i.layers)},setView:function(t,e){return this._resetView(t,this._limitZoom(e)),this},setZoom:function(t){return this.setView(this.getCenter(),t)},zoomIn:function(){return this.setZoom(this._zoom+1)},zoomOut:function(){return this.setZoom(this._zoom-1)},fitBounds:function(t){var e=this.getBoundsZoom(t);return this.setView(t.getCenter(),e)},fitWorld:function(){var e=new t.LatLng(-60,-170),i=new t.LatLng(85,179);return this.fitBounds(new t.LatLngBounds(e,i))},panTo:function(t){return this.setView(t,this._zoom)},panBy:function(t){return this.fire("movestart"),this._rawPanBy(t),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){if(this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this;var e=this.getBoundsZoom(t,!0);return this._boundsMinZoom=e,this._loaded&&(e>this._zoom?this.setView(t.getCenter(),e):this.panInsideBounds(t)),this},panInsideBounds:function(e){var i=this.getBounds(),n=this.project(i.getSouthWest()),o=this.project(i.getNorthEast()),s=this.project(e.getSouthWest()),r=this.project(e.getNorthEast()),a=0,l=0;return o.y<r.y&&(l=r.y-o.y),o.x>r.x&&(a=r.x-o.x),n.y>s.y&&(l=s.y-n.y),n.x<s.x&&(a=s.x-n.x),this.panBy(new t.Point(a,l,!0))},addLayer:function(e,i){var n=t.Util.stamp(e);if(this._layers[n])return this;this._layers[n]=e,e.options&&!isNaN(e.options.maxZoom)&&(this._layersMaxZoom=Math.max(this._layersMaxZoom||0,e.options.maxZoom)),e.options&&!isNaN(e.options.minZoom)&&(this._layersMinZoom=Math.min(this._layersMinZoom||1/0,e.options.minZoom)),this.options.zoomAnimation&&t.TileLayer&&e instanceof t.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this));var o=function(){e.onAdd(this,i),this.fire("layeradd",{layer:e})};return this._loaded?o.call(this):this.on("load",o,this),this},removeLayer:function(e){var i=t.Util.stamp(e);if(this._layers[i])return e.onRemove(this),delete this._layers[i],this.options.zoomAnimation&&t.TileLayer&&e instanceof t.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this.fire("layerremove",{layer:e})},hasLayer:function(e){var i=t.Util.stamp(e);return this._layers.hasOwnProperty(i)},invalidateSize:function(){var e=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var i=e.subtract(this.getSize()).divideBy(2,!0);return this._rawPanBy(i),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(t.Util.bind(this.fire,this,"moveend"),200),this},addHandler:function(t,e){return e?(this[t]=new e(this),this.options[t]&&this[t].enable(),this):void 0},getCenter:function(t){var e=this.getSize().divideBy(2),i=this._getTopLeftPoint().add(e);return this.unproject(i,this._zoom,t)},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),i=this.unproject(new t.Point(e.min.x,e.max.y),this._zoom,!0),n=this.unproject(new t.Point(e.max.x,e.min.y),this._zoom,!0);return new t.LatLngBounds(i,n)},getMinZoom:function(){var t=this.options.minZoom||0,e=this._layersMinZoom||0,i=this._boundsMinZoom||0;return Math.max(t,e,i)},getMaxZoom:function(){var t=this.options.maxZoom===void 0?1/0:this.options.maxZoom,e=this._layersMaxZoom===void 0?1/0:this._layersMaxZoom;return Math.min(t,e)},getBoundsZoom:function(e,i){var n,o,s,r=this.getSize(),a=this.options.minZoom||0,l=this.getMaxZoom(),h=e.getNorthEast(),c=e.getSouthWest(),u=!0;i&&a--;do a++,o=this.project(h,a),s=this.project(c,a),n=new t.Point(o.x-s.x,s.y-o.y),u=i?n.x<r.x||n.y<r.y:n.x<=r.x&&n.y<=r.y;while(u&&l>=a);return u&&i?null:i?a:a-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new t.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size},getPixelBounds:function(){var e=this._getTopLeftPoint();return new t.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},mouseEventToContainerPoint:function(e){return t.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},containerPointToLayerPoint:function(e){return e.subtract(t.DomUtil.getPosition(this._mapPane))},layerPointToContainerPoint:function(e){return e.add(t.DomUtil.getPosition(this._mapPane))},layerPointToLatLng:function(t){return this.unproject(t.add(this._initialTopLeftPoint))},latLngToLayerPoint:function(t){return this.project(t)._round()._subtract(this._initialTopLeftPoint)},containerPointToLatLng:function(t){return this.layerPointToLatLng(this.containerPointToLayerPoint(t))},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(t))},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(t,e)},unproject:function(t,e,i){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(t,e,i)},_initContainer:function(e){var i=this._container=t.DomUtil.get(e);if(i._leaflet)throw Error("Map container is already initialized.");i._leaflet=!0},_initLayout:function(){var e=this._container;e.innerHTML="",e.className+=" leaflet-container",t.Browser.touch&&(e.className+=" leaflet-touch"),this.options.fadeAnimation&&(e.className+=" leaflet-fade-anim");var i=t.DomUtil.getStyle(e,"position");"absolute"!==i&&"relative"!==i&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),this._objectsPane=t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane")},_createPane:function(e,i){return t.DomUtil.create("div",e,i||this._objectsPane)},_initializers:[],_initHooks:function(){var t,e;for(t=0,e=this._initializers.length;e>t;t++)this._initializers[t].call(this)},_resetView:function(e,i,n,o){var s=this._zoom!==i;o||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=i,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),n?this._initialTopLeftPoint._add(t.DomUtil.getPosition(this._mapPane)):t.DomUtil.setPosition(this._mapPane,new t.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum,this.fire("viewreset",{hard:!n}),this.fire("move"),(s||o)&&this.fire("zoomend"),this.fire("moveend"),this._loaded||(this._loaded=!0,this.fire("load"))},_initLayers:function(t){t=t?t instanceof Array?t:[t]:[],this._layers={},this._tileLayersNum=0;var e,i;for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_rawPanBy:function(e){var i=t.DomUtil.getPosition(this._mapPane).subtract(e);t.DomUtil.setPosition(this._mapPane,i)},_initEvents:function(){if(t.DomEvent){t.DomEvent.addListener(this._container,"click",this._onMouseClick,this);var e,i,n=["dblclick","mousedown","mouseenter","mouseleave","mousemove","contextmenu"];for(e=0,i=n.length;i>e;e++)t.DomEvent.addListener(this._container,n[e],this._fireMouseEvent,this);this.options.trackResize&&t.DomEvent.addListener(window,"resize",this._onResize,this)}},_onResize:function(){t.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(t){!this._loaded||this.dragging&&this.dragging.moved()||(this.fire("pre"+t.type),this._fireMouseEvent(t))},_fireMouseEvent:function(e){if(this._loaded){var i=e.type;if(i="mouseenter"===i?"mouseover":"mouseleave"===i?"mouseout":i,this.hasEventListeners(i)){"contextmenu"===i&&t.DomEvent.preventDefault(e);var n=this.mouseEventToContainerPoint(e),o=this.containerPointToLayerPoint(n),s=this.layerPointToLatLng(o);this.fire(i,{latlng:s,layerPoint:o,containerPoint:n,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(t.Util.bind(this._clearTileBg,this),500))},_getTopLeftPoint:function(){if(!this._loaded)throw Error("Set map center and zoom first.");var e=t.DomUtil.getPosition(this._mapPane);return this._initialTopLeftPoint.subtract(e)},_getNewTopLeftPoint:function(t){var e=this.getSize().divideBy(2);return this.project(t)._subtract(e)._round()},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),t.Map.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initializers.push(i)},t.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(e){var i=t.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,e.lat),-n),s=this.R_MAJOR,r=this.R_MINOR,a=e.lng*i*s,l=o*i,h=r/s,c=Math.sqrt(1-h*h),u=c*Math.sin(l);u=Math.pow((1-u)/(1+u),.5*c);var d=Math.tan(.5*(.5*Math.PI-l))/u;return l=-r*Math.log(d),new t.Point(a,l)},unproject:function(e,i){for(var n,o=t.LatLng.RAD_TO_DEG,s=this.R_MAJOR,r=this.R_MINOR,a=e.x*o/s,l=r/s,h=Math.sqrt(1-l*l),c=Math.exp(-e.y/r),u=Math.PI/2-2*Math.atan(c),d=15,p=1e-7,m=d,f=.1;Math.abs(f)>p&&--m>0;)n=h*Math.sin(u),f=Math.PI/2-2*Math.atan(c*Math.pow((1-n)/(1+n),.5*h))-u,u+=f;return new t.LatLng(u*o,a,i)}},t.CRS.EPSG3395=t.Util.extend({},t.CRS,{code:"EPSG:3395",projection:t.Projection.Mercator,transformation:function(){var e=t.Projection.Mercator,i=e.R_MAJOR,n=e.R_MINOR;return new t.Transformation(.5/(Math.PI*i),.5,-.5/(Math.PI*n),.5)}()}),t.TileLayer=t.Class.extend({includes:t.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,scheme:"xyz",continuousWorld:!1,noWrap:!1,zoomOffset:0,zoomReverse:!1,detectRetina:!1,unloadInvisibleTiles:t.Browser.mobile,updateWhenIdle:t.Browser.mobile,reuseTiles:!1},initialize:function(e,i){i=t.Util.setOptions(this,i),i.detectRetina&&window.devicePixelRatio>1&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomOffset++,i.minZoom>0&&i.minZoom--,this.options.maxZoom--),this._url=e;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(e,i){this._map=e,this._insertAtTheBottom=i,this._initContainer(),this._createTileProto(),e.on("viewreset",this._resetCallback,this),e.on("moveend",this._update,this),this.options.updateWhenIdle||(this._limitedUpdate=t.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()
},onRemove:function(t){t._panes.tilePane.removeChild(this._container),t.off("viewreset",this._resetCallback,this),t.off("moveend",this._update,this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},getAttribution:function(){return this.options.attribution},setOpacity:function(e){this.options.opacity=e,this._map&&this._updateOpacity();var i,n=this._tiles;if(t.Browser.webkit)for(i in n)n.hasOwnProperty(i)&&(n[i].style.webkitTransform+=" translate(0,0)")},_updateOpacity:function(){t.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var e=this._map._panes.tilePane,i=e.firstChild;(!this._container||e.empty)&&(this._container=t.DomUtil.create("div","leaflet-layer"),this._insertAtTheBottom&&i?e.insertBefore(this._container,i):e.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_resetCallback:function(t){this._reset(t.hard)},_reset:function(t){var e,i=this._tiles;for(e in i)i.hasOwnProperty(e)&&this.fire("tileunload",{tile:i[e]});this._tiles={},this.options.reuseTiles&&(this._unusedTiles=[]),t&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(){if(!this._map._panTransition||!this._map._panTransition._inProgress){var e=this._map.getPixelBounds(),i=this._map.getZoom(),n=this.options.tileSize;if(!(i>this.options.maxZoom||this.options.minZoom>i)){var o=new t.Point(Math.floor(e.min.x/n),Math.floor(e.min.y/n)),s=new t.Point(Math.floor(e.max.x/n),Math.floor(e.max.y/n)),r=new t.Bounds(o,s);this._addTilesFromCenterOut(r),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(r)}}},_addTilesFromCenterOut:function(e){var i,n,o=[],s=e.getCenter();for(i=e.min.y;e.max.y>=i;i++)for(n=e.min.x;e.max.x>=n;n++)n+":"+i in this._tiles||o.push(new t.Point(n,i));o.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)});var r=document.createDocumentFragment();this._tilesToLoad=o.length;var a,l;for(a=0,l=this._tilesToLoad;l>a;a++)this._addTile(o[a],r);this._container.appendChild(r)},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)this._tiles.hasOwnProperty(o)&&(e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(t.min.x>i||i>t.max.x||t.min.y>n||n>t.max.y)&&this._removeTile(o))},_removeTile:function(e){var i=this._tiles[e];this.fire("tileunload",{tile:i,url:i.src}),i.parentNode===this._container&&this._container.removeChild(i),this.options.reuseTiles&&this._unusedTiles.push(i),i.src=t.Util.emptyImageUrl,delete this._tiles[e]},_addTile:function(e,i){var n=this._getTilePos(e),o=this._map.getZoom(),s=e.x+":"+e.y,r=Math.pow(2,this._getOffsetZoom(o));if(!this.options.continuousWorld){if(this.options.noWrap){if(0>e.x||e.x>=r)return this._tilesToLoad--,void 0}else e.x=(e.x%r+r)%r;if(0>e.y||e.y>=r)return this._tilesToLoad--,void 0}var a=this._getTile();t.DomUtil.setPosition(a,n),this._tiles[s]=a,"tms"===this.options.scheme&&(e.y=r-e.y-1),this._loadTile(a,e,o),i.appendChild(a)},_getOffsetZoom:function(t){var e=this.options;return t=e.zoomReverse?e.maxZoom-t:t,t+e.zoomOffset},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this.options.tileSize;return t.multiplyBy(i).subtract(e)},getTileUrl:function(e,i){var n=this.options.subdomains,o=(e.x+e.y)%n.length,s=this.options.subdomains[o];return t.Util.template(this._url,t.Util.extend({s:s,z:this._getOffsetZoom(i),x:e.x,y:e.y},this.options))},_createTileProto:function(){var e=this._tileImg=t.DomUtil.create("img","leaflet-tile");e.galleryimg="no";var i=this.options.tileSize;e.style.width=i+"px",e.style.height=i+"px"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=this._tileImg.cloneNode(!1);return e.onselectstart=e.onmousemove=t.Util.falseFn,e},_loadTile:function(t,e,i){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,t.src=this.getTileUrl(e,i)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||this.fire("load")},_tileOnLoad:function(){var t=this._layer;this.className+=" leaflet-tile-loaded",t.fire("tileload",{tile:this,url:this.src}),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),t.TileLayer.WMS=t.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,i){this._url=e;var n=t.Util.extend({},this.defaultWmsParams);n.width=n.height=this.options.tileSize;for(var o in i)this.options.hasOwnProperty(o)||(n[o]=i[o]);this.wmsParams=n,t.Util.setOptions(this,i)},onAdd:function(e,i){var n=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[n]=e.options.crs.code,t.TileLayer.prototype.onAdd.call(this,e,i)},getTileUrl:function(e,i){var n=this._map,o=n.options.crs,s=this.options.tileSize,r=e.multiplyBy(s),a=r.add(new t.Point(s,s)),l=n.unproject(r,i,!0),h=n.unproject(a,i,!0),c=o.project(l),u=o.project(h),d=[c.x,u.y,u.x,c.y].join(",");return this._url+t.Util.getParamString(this.wmsParams)+"&bbox="+d}}),t.TileLayer.Canvas=t.TileLayer.extend({options:{async:!1},initialize:function(e){t.Util.setOptions(this,e)},redraw:function(){var t,e=this._tiles;for(t in e)e.hasOwnProperty(t)&&this._redrawTile(e[t])},_redrawTile:function(t){this.drawTile(t,t._tilePoint,t._zoom)},_createTileProto:function(){var e=this._canvasProto=t.DomUtil.create("canvas","leaflet-tile"),i=this.options.tileSize;e.width=i,e.height=i},_createTile:function(){var e=this._canvasProto.cloneNode(!1);return e.onselectstart=e.onmousemove=t.Util.falseFn,e},_loadTile:function(t,e,i){t._layer=this,t._tilePoint=e,t._zoom=i,this.drawTile(t,e,i),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),t.ImageOverlay=t.Class.extend({includes:t.Mixin.Events,initialize:function(t,e){this._url=t,this._bounds=e},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this)},_initImage:function(){this._image=t.DomUtil.create("img","leaflet-image-layer"),this._image.style.visibility="hidden",t.Util.extend(this._image,{galleryimg:"no",onselectstart:t.Util.falseFn,onmousemove:t.Util.falseFn,onload:t.Util.bind(this._onImageLoad,this),src:this._url})},_reset:function(){var e=this._image,i=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast()).subtract(i);t.DomUtil.setPosition(e,i),e.style.width=n.x+"px",e.style.height=n.y+"px"},_onImageLoad:function(){this._image.style.visibility="",this.fire("load")}}),t.Icon=t.Class.extend({options:{className:""},initialize:function(e){t.Util.setOptions(this,e)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(t){var e=this._getIconUrl(t);if(!e)return null;var i=this._createImg(e);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"],o=i.iconAnchor;!o&&n&&(o=n.divideBy(2,!0)),"shadow"===e&&o&&i.shadowOffset&&o._add(i.shadowOffset),t.className="leaflet-marker-"+e+" "+i.className,o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),n&&(t.style.width=n.x+"px",t.style.height=n.y+"px")},_createImg:function(e){var i;return t.Browser.ie6?(i=document.createElement("div"),i.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e+'")'):(i=document.createElement("img"),i.src=e),i},_getIconUrl:function(t){return this.options[t+"Url"]}}),t.Icon.Default=t.Icon.extend({options:{iconSize:new t.Point(25,41),iconAnchor:new t.Point(13,41),popupAnchor:new t.Point(0,-33),shadowSize:new t.Point(41,41)},_getIconUrl:function(e){var i=t.Icon.Default.imagePath;if(!i)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+e+".png"}}),t.Icon.Default.imagePath=function(){var t,e,i,n,o=document.getElementsByTagName("script"),s=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=o.length;e>t;t++)if(i=o[t].src,n=i.match(s))return i.split(s)[0]+"/images"}(),t.Marker=t.Class.extend({includes:t.Mixin.Events,options:{icon:new t.Icon.Default,title:"",clickable:!0,draggable:!1,zIndexOffset:0,opacity:1},initialize:function(e,i){t.Util.setOptions(this,i),this._latlng=e},onAdd:function(t){this._map=t,t.on("viewreset",this._reset,this),this._initIcon(),this._reset()},onRemove:function(t){this._removeIcon(),this.closePopup&&this.closePopup(),t.off("viewreset",this._reset,this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=t,this._reset(),this._popup&&this._popup.setLatLng(t)},setZIndexOffset:function(t){this.options.zIndexOffset=t,this._reset()},setIcon:function(t){this._map&&this._removeIcon(),this.options.icon=t,this._map&&(this._initIcon(),this._reset())},_initIcon:function(){var t=this.options;this._icon||(this._icon=t.icon.createIcon(),t.title&&(this._icon.title=t.title),this._initInteraction(),this._updateOpacity()),this._shadow||(this._shadow=t.icon.createShadow());var e=this._map._panes;e.markerPane.appendChild(this._icon),this._shadow&&e.shadowPane.appendChild(this._shadow)},_removeIcon:function(){var t=this._map._panes;t.markerPane.removeChild(this._icon),this._shadow&&t.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_reset:function(){var e=this._icon;if(e){var i=this._map.latLngToLayerPoint(this._latlng).round();t.DomUtil.setPosition(e,i),this._shadow&&t.DomUtil.setPosition(this._shadow,i),e.style.zIndex=i.y+this.options.zIndexOffset}},_initInteraction:function(){if(this.options.clickable){var e=this._icon,i=["dblclick","mousedown","mouseover","mouseout"];e.className+=" leaflet-clickable",t.DomEvent.addListener(e,"click",this._onMouseClick,this);for(var n=0;i.length>n;n++)t.DomEvent.addListener(e,i[n],this._fireMouseEvent,this);t.Handler.MarkerDrag&&(this.dragging=new t.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){t.DomEvent.stopPropagation(e),this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()||this.fire(e.type,{originalEvent:e})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e}),"mousedown"!==e.type&&t.DomEvent.stopPropagation(e)},setOpacity:function(t){this.options.opacity=t,this._map&&this._updateOpacity()},_updateOpacity:function(){t.DomUtil.setOpacity(this._icon,this.options.opacity)}}),t.DivIcon=t.Icon.extend({options:{iconSize:new t.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var t=document.createElement("div");return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}}),t.Map.mergeOptions({closePopupOnClick:!0}),t.Popup=t.Class.extend({includes:t.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:new t.Point(0,2),autoPanPadding:new t.Point(5,5),className:""},initialize:function(e,i){t.Util.setOptions(this,e),this._source=i},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent(),this._container.style.opacity="0",t._panes.popupPane.appendChild(this._container),t.on("viewreset",this._updatePosition,this),t.options.closePopupOnClick&&t.on("preclick",this._close,this),this._update(),this._container.style.opacity="1"},onRemove:function(e){e._panes.popupPane.removeChild(this._container),t.Util.falseFn(this._container.offsetWidth),e.off("viewreset",this._updatePosition,this).off("preclick",this._close,this),this._container.style.opacity="0",this._map=null},setLatLng:function(t){return this._latlng=t,this._update(),this},setContent:function(t){return this._content=t,this._update(),this},_close:function(){var t=this._map;t&&(t._popup=null,t.removeLayer(this).fire("popupclose",{popup:this}))},_initLayout:function(){var e,i="leaflet-popup",n=this._container=t.DomUtil.create("div",i+" "+this.options.className);this.options.closeButton&&(e=this._closeButton=t.DomUtil.create("a",i+"-close-button",n),e.href="#close",t.DomEvent.addListener(e,"click",this._onCloseButtonClick,this));var o=this._wrapper=t.DomUtil.create("div",i+"-content-wrapper",n);t.DomEvent.disableClickPropagation(o),this._contentNode=t.DomUtil.create("div",i+"-content",o),t.DomEvent.addListener(this._contentNode,"mousewheel",t.DomEvent.stopPropagation),this._tipContainer=t.DomUtil.create("div",i+"-tip-container",n),this._tip=t.DomUtil.create("div",i+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){this._content&&("string"==typeof this._content?this._contentNode.innerHTML=this._content:(this._contentNode.innerHTML="",this._contentNode.appendChild(this._content)),this.fire("contentupdate"))},_updateLayout:function(){var t=this._contentNode;t.style.width="",t.style.whiteSpace="nowrap";var e=t.offsetWidth;e=Math.min(e,this.options.maxWidth),e=Math.max(e,this.options.minWidth),t.style.width=e+1+"px",t.style.whiteSpace="",t.style.height="";var i=t.offsetHeight,n=this.options.maxHeight,o=" leaflet-popup-scrolled";n&&i>n?(t.style.height=n+"px",t.className+=o):t.className=t.className.replace(o,""),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._containerBottom=-t.y-this.options.offset.y,this._containerLeft=t.x-Math.round(this._containerWidth/2)+this.options.offset.x,this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"},_adjustPan:function(){if(this.options.autoPan){var e=this._map,i=this._container.offsetHeight,n=this._containerWidth,o=new t.Point(this._containerLeft,-i-this._containerBottom),s=e.layerPointToContainerPoint(o),r=new t.Point(0,0),a=this.options.autoPanPadding,l=e.getSize();0>s.x&&(r.x=s.x-a.x),s.x+n>l.x&&(r.x=s.x+n-l.x+a.x),0>s.y&&(r.y=s.y-a.y),s.y+i>l.y&&(r.y=s.y+i-l.y+a.y),(r.x||r.y)&&e.panBy(r)}},_onCloseButtonClick:function(e){this._close(),t.DomEvent.stop(e)}}),t.Marker.include({openPopup:function(){return this._popup&&this._map&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(e,i){var n=this.options.icon.options.popupAnchor||new t.Point(0,0);return i&&i.offset&&(n=n.add(i.offset)),i=t.Util.extend({offset:n},i),this._popup||this.on("click",this.openPopup,this),this._popup=new t.Popup(i,this).setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup)),this}}),t.Map.include({openPopup:function(t){return this.closePopup(),this._popup=t,this.addLayer(t).fire("popupopen",{popup:this._popup})},closePopup:function(){return this._popup&&this._popup._close(),this}}),t.LayerGroup=t.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(e){var i=t.Util.stamp(e);return this._layers[i]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var i=t.Util.stamp(e);return delete this._layers[i],this._map&&this._map.removeLayer(e),this},clearLayers:function(){return this._iterateLayers(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)this._layers.hasOwnProperty(e)&&(i=this._layers[e],i[t]&&i[t].apply(i,n));return this},onAdd:function(t){this._map=t,this._iterateLayers(t.addLayer,t)},onRemove:function(t){this._iterateLayers(t.removeLayer,t),this._map=null},_iterateLayers:function(t,e){for(var i in this._layers)this._layers.hasOwnProperty(i)&&t.call(e,this._layers[i])}}),t.FeatureGroup=t.LayerGroup.extend({includes:t.Mixin.Events,addLayer:function(e){this._initEvents(e),t.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent)},bindPopup:function(t){return this._popupContent=t,this.invoke("bindPopup",t)},setStyle:function(t){return this.invoke("setStyle",t)},getBounds:function(){var e=new t.LatLngBounds;return this._iterateLayers(function(i){e.extend(i instanceof t.Marker?i.getLatLng():i.getBounds())},this),e},_initEvents:function(t){var e,i,n=["click","dblclick","mouseover","mouseout"];for(e=0,i=n.length;i>e;e++)t.on(n[e],this._propagateEvent,this)},_propagateEvent:function(t){t.layer=t.target,t.target=this,this.fire(t.type,t)}}),t.Path=t.Class.extend({includes:[t.Mixin.Events],statics:{CLIP_PADDING:.5},options:{stroke:!0,color:"#0033ff",weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){t.Util.setOptions(this,e)},onAdd:function(t){this._map=t,this._initElements(),this._initEvents(),this.projectLatlngs(),this._updatePath(),t.on("viewreset",this.projectLatlngs,this).on("moveend",this._updatePath,this)},onRemove:function(t){this._map=null,t._pathRoot.removeChild(this._container),t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this)},projectLatlngs:function(){},setStyle:function(e){return t.Util.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),t.Map.include({_updatePathViewport:function(){var e=t.Path.CLIP_PADDING,i=this.getSize(),n=t.DomUtil.getPosition(this._mapPane),o=n.multiplyBy(-1)._subtract(i.multiplyBy(e)),s=o.add(i.multiplyBy(1+2*e));this._pathViewport=new t.Bounds(o,s)}}),t.Path.SVG_NS="http://www.w3.org/2000/svg",t.Browser.svg=!!document.createElementNS&&!!document.createElementNS(t.Path.SVG_NS,"svg").createSVGRect,t.Path=t.Path.extend({statics:{SVG:t.Browser.svg},getPathString:function(){},_createElement:function(e){return document.createElementNS(t.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path),this._map._pathRoot.appendChild(this._container)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(t.Browser.svg||!t.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),t.DomEvent.addListener(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],i=0;e.length>i;i++)t.DomEvent.addListener(this._container,e[i],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||("contextmenu"===e.type&&t.DomEvent.preventDefault(e),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this.hasEventListeners(e.type)){var i=this._map,n=i.mouseEventToContainerPoint(e),o=i.containerPointToLayerPoint(n),s=i.layerPointToLatLng(o);this.fire(e.type,{latlng:s,layerPoint:o,containerPoint:n,originalEvent:e}),t.DomEvent.stopPropagation(e)}}}),t.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=t.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_updateSvgViewport:function(){this._updatePathViewport();var e=this._pathViewport,i=e.min,n=e.max,o=n.x-i.x,s=n.y-i.y,r=this._pathRoot,a=this._panes.overlayPane;t.Browser.webkit&&a.removeChild(r),t.DomUtil.setPosition(r,i),r.setAttribute("width",o),r.setAttribute("height",s),r.setAttribute("viewBox",[i.x,i.y,o,s].join(" ")),t.Browser.webkit&&a.appendChild(r)}}),t.Path.include({bindPopup:function(e,i){return this._popup&&this._popup.options===i||(this._popup=new t.Popup(i,this)),this._popup.setContent(e),this._openPopupAdded||(this.on("click",this._openPopup,this),this._openPopupAdded=!0),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),t.Browser.vml=function(){var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}(),t.Path=t.Browser.svg||!t.Browser.vml?t.Path:t.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");t.className+=" leaflet-vml-shape"+(this.options.clickable?" leaflet-clickable":""),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){var t,e,i=this._container;this.options.stroke&&(t=this._stroke=this._createElement("stroke"),t.endcap="round",i.appendChild(t)),this.options.fill&&(e=this._fill=this._createElement("fill"),i.appendChild(e)),this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke&&(t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity),i.fill&&(e.color=i.fillColor||i.color,e.opacity=i.fillOpacity)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),t.Map.include(t.Browser.svg||!t.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=document.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),t.Browser.canvas=function(){return!!document.createElement("canvas").getContext}(),t.Path=t.Path.SVG&&!window.L_PREFER_CANVAS||!t.Browser.canvas?t.Path:t.Path.extend({statics:{CANVAS:!0,SVG:!1},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var e,i,n,o,s,r;for(this._ctx.beginPath(),e=0,n=this._parts.length;n>e;e++){for(i=0,o=this._parts[e].length;o>i;i++)s=this._parts[e][i],r=(0===i?"move":"line")+"To",this._ctx[r](s.x,s.y);this instanceof t.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(1>e.fillOpacity&&(t.globalAlpha=e.fillOpacity),t.fill()),e.stroke&&(1>e.opacity&&(t.globalAlpha=e.opacity),t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},onRemove:function(t){t.off("viewreset",this._projectLatlngs,this).off("moveend",this._updatePath,this).fire("moveend")}}),t.Map.include(t.Path.SVG&&!window.L_PREFER_CANVAS||!t.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||(e=this._pathRoot=document.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){this._updatePathViewport();var e=this._pathViewport,i=e.min,n=e.max.subtract(i),o=this._pathRoot;t.DomUtil.setPosition(o,i),o.width=n.x,o.height=n.y,o.getContext("2d").translate(-i.x,-i.y)}}),t.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var i=t.length,n="undefined"!=typeof Uint8Array?Uint8Array:Array,o=new n(i);o[0]=o[i-1]=1,this._simplifyDPStep(t,o,e,0,i-1);var s,r=[];for(s=0;i>s;s++)o[s]&&r.push(t[s]);return r},_simplifyDPStep:function(t,e,i,n,o){var s,r,a,l=0;for(r=n+1;o-1>=r;r++)a=this._sqClosestPointOnSegment(t[r],t[n],t[o],!0),a>l&&(s=r,l=a);l>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;s>n;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return s-1>o&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n){var o=(i.min,i.max,n?this._lastCode:this._getBitCode(t,i)),s=this._getBitCode(e,i);for(this._lastCode=s;;){if(!(o|s))return[t,e];if(o&s)return!1;var r=o||s,a=this._getEdgeIntersection(t,e,r,i),l=this._getBitCode(a,i);r===o?(t=a,o=l):(e=a,s=l)}},_getEdgeIntersection:function(e,i,n,o){var s=i.x-e.x,r=i.y-e.y,a=o.min,l=o.max;return 8&n?new t.Point(e.x+s*(l.y-e.y)/r,l.y):4&n?new t.Point(e.x+s*(a.y-e.y)/r,a.y):2&n?new t.Point(l.x,e.y+r*(l.x-e.x)/s):1&n?new t.Point(a.x,e.y+r*(a.x-e.x)/s):void 0},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(e,i,n,o){var s,r=i.x,a=i.y,l=n.x-r,h=n.y-a,c=l*l+h*h;return c>0&&(s=((e.x-r)*l+(e.y-a)*h)/c,s>1?(r=n.x,a=n.y):s>0&&(r+=l*s,a+=h*s)),l=e.x-r,h=e.y-a,o?l*l+h*h:new t.Point(r,a)}},t.Polyline=t.Path.extend({initialize:function(e,i){t.Path.prototype.initialize.call(this,i),this._latlngs=e,t.Handler.PolyEdit&&(this.editing=new t.Handler.PolyEdit(this),this.options.editable&&this.editing.enable())},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";e>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this.redraw(),t},closestLayerPoint:function(e){for(var i,n,o=1/0,s=this._parts,r=null,a=0,l=s.length;l>a;a++)for(var h=s[a],c=1,u=h.length;u>c;c++){i=h[c-1],n=h[c];var d=t.LineUtil._sqClosestPointOnSegment(e,i,n);o>d._sqDist&&(o=d._sqDist,r=d)}return r&&(r.distance=Math.sqrt(o)),r},getBounds:function(){for(var e=new t.LatLngBounds,i=this.getLatLngs(),n=0,o=i.length;o>n;n++)e.extend(i[n]);return e},onAdd:function(e){t.Path.prototype.onAdd.call(this,e),this.editing&&this.editing.enabled()&&this.editing.addHooks()},onRemove:function(e){this.editing&&this.editing.enabled()&&this.editing.removeHooks(),t.Path.prototype.onRemove.call(this,e)},_initEvents:function(){t.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var i,n=t.Path.VML,o=0,s=e.length,r="";s>o;o++)i=e[o],n&&i._round(),r+=(o?"L":"M")+i.x+" "+i.y;return r},_clipPoints:function(){var e,i,n,o=this._originalPoints,s=o.length;if(this.options.noClip)return this._parts=[o],void 0;this._parts=[];var r=this._parts,a=this._map._pathViewport,l=t.LineUtil;for(e=0,i=0;s-1>e;e++)n=l.clipSegment(o[e],o[e+1],a,e),n&&(r[i]=r[i]||[],r[i].push(n[0]),(n[1]!==o[e+1]||e===s-2)&&(r[i].push(n[1]),i++))},_simplifyPoints:function(){for(var e=this._parts,i=t.LineUtil,n=0,o=e.length;o>n;n++)e[n]=i.simplify(e[n],this.options.smoothFactor)},_updatePath:function(){this._clipPoints(),this._simplifyPoints(),t.Path.prototype._updatePath.call(this)}}),t.PolyUtil={},t.PolyUtil.clipPolygon=function(e,i){var n,o,s,r,a,l,h,c,u,d=(i.min,i.max,[1,4,2,8]),p=t.LineUtil;for(o=0,h=e.length;h>o;o++)e[o]._code=p._getBitCode(e[o],i);for(r=0;4>r;r++){for(c=d[r],n=[],o=0,h=e.length,s=h-1;h>o;s=o++)a=e[o],l=e[s],a._code&c?l._code&c||(u=p._getEdgeIntersection(l,a,c,i),u._code=p._getBitCode(u,i),n.push(u)):(l._code&c&&(u=p._getEdgeIntersection(l,a,c,i),u._code=p._getBitCode(u,i),n.push(u)),n.push(a));e=n}return e},t.Polygon=t.Polyline.extend({options:{fill:!0},initialize:function(e,i){t.Polyline.prototype.initialize.call(this,e,i),e&&e[0]instanceof Array&&(this._latlngs=e[0],this._holes=e.slice(1))},projectLatlngs:function(){if(t.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(var e=0,i=this._holes.length;i>e;e++){this._holePoints[e]=[];for(var n=0,o=this._holes[e].length;o>n;n++)this._holePoints[e][n]=this._map.latLngToLayerPoint(this._holes[e][n])}},_clipPoints:function(){var e=this._originalPoints,i=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var n=0,o=this._parts.length;o>n;n++){var s=t.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);s.length&&i.push(s)}this._parts=i}},_getPathPartStr:function(e){var i=t.Polyline.prototype._getPathPartStr.call(this,e);return i+(t.Browser.svg?"z":"x")}}),function(){function e(e){return t.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(t){var i=0,n=t.length;for(this._iterateLayers(function(e){n>i?e.setLatLngs(t[i++]):this.removeLayer(e)},this);n>i;)this.addLayer(new e(t[i++],this._options));return this}})}t.MultiPolyline=e(t.Polyline),t.MultiPolygon=e(t.Polygon)}(),t.Rectangle=t.Polygon.extend({initialize:function(e,i){t.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),i)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),t.Circle=t.Path.extend({initialize:function(e,i,n){t.Path.prototype.initialize.call(this,n),this._latlng=e,this._mRadius=i},options:{fill:!0},setLatLng:function(t){return this._latlng=t,this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),i=new t.LatLng(this._latlng.lat,this._latlng.lng-e,!0),n=this._map.latLngToLayerPoint(i);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.max(Math.round(this._point.x-n.x),1)},getBounds:function(){var e=this._map,i=this._radius*Math.cos(Math.PI/4),n=e.project(this._latlng),o=new t.Point(n.x-i,n.y+i),s=new t.Point(n.x+i,n.y-i),r=e.getZoom(),a=e.unproject(o,r,!0),l=e.unproject(s,r,!0);return new t.LatLngBounds(a,l)},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,i=this._radius;return this._checkIfEmpty()?"":t.Browser.svg?"M"+e.x+","+(e.y-i)+"A"+i+","+i+",0,1,1,"+(e.x-.1)+","+(e.y-i)+" z":(e._round(),i=Math.round(i),"AL "+e.x+","+e.y+" "+i+","+i+" 0,"+23592600)},getRadius:function(){return this._mRadius},_getLngRadius:function(){var e=40075017,i=e*Math.cos(t.LatLng.DEG_TO_RAD*this._latlng.lat);return 360*(this._mRadius/i)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y
}}),t.CircleMarker=t.Circle.extend({options:{radius:10,weight:2},initialize:function(e,i){t.Circle.prototype.initialize.call(this,e,null,i),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},setRadius:function(t){return this._radius=t,this.redraw()}}),t.Polyline.include(t.Path.CANVAS?{_containsPoint:function(e,i){var n,o,s,r,a,l,h,c=this.options.weight/2;for(t.Browser.touch&&(c+=10),n=0,r=this._parts.length;r>n;n++)for(h=this._parts[n],o=0,a=h.length,s=a-1;a>o;s=o++)if((i||0!==o)&&(l=t.LineUtil.pointToSegmentDistance(e,h[s],h[o]),c>=l))return!0;return!1}}:{}),t.Polygon.include(t.Path.CANVAS?{_containsPoint:function(e){var i,n,o,s,r,a,l,h,c=!1;if(t.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(s=0,l=this._parts.length;l>s;s++)for(i=this._parts[s],r=0,h=i.length,a=h-1;h>r;a=r++)n=i[r],o=i[a],n.y>e.y!=o.y>e.y&&e.x<(o.x-n.x)*(e.y-n.y)/(o.y-n.y)+n.x&&(c=!c);return c}}:{}),t.Circle.include(t.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),t.GeoJSON=t.FeatureGroup.extend({initialize:function(e,i){t.Util.setOptions(this,i),this._geojson=e,this._layers={},e&&this.addGeoJSON(e)},addGeoJSON:function(e){var i,n,o=e.features;if(o)for(i=0,n=o.length;n>i;i++)this.addGeoJSON(o[i]);else{var s="Feature"===e.type,r=s?e.geometry:e,a=t.GeoJSON.geometryToLayer(r,this.options.pointToLayer);this.fire("featureparse",{layer:a,properties:e.properties,geometryType:r.type,bbox:e.bbox,id:e.id}),this.addLayer(a)}}}),t.Util.extend(t.GeoJSON,{geometryToLayer:function(e,i){var n,o,s,r,a,l=e.coordinates,h=[];switch(e.type){case"Point":return n=this.coordsToLatLng(l),i?i(n):new t.Marker(n);case"MultiPoint":for(s=0,r=l.length;r>s;s++)n=this.coordsToLatLng(l[s]),a=i?i(n):new t.Marker(n),h.push(a);return new t.FeatureGroup(h);case"LineString":return o=this.coordsToLatLngs(l),new t.Polyline(o);case"Polygon":return o=this.coordsToLatLngs(l,1),new t.Polygon(o);case"MultiLineString":return o=this.coordsToLatLngs(l,1),new t.MultiPolyline(o);case"MultiPolygon":return o=this.coordsToLatLngs(l,2),new t.MultiPolygon(o);case"GeometryCollection":for(s=0,r=e.geometries.length;r>s;s++)a=this.geometryToLayer(e.geometries[s],i),h.push(a);return new t.FeatureGroup(h);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e,i){var n=parseFloat(e[i?0:1]),o=parseFloat(e[i?1:0]);return new t.LatLng(n,o,!0)},coordsToLatLngs:function(t,e,i){var n,o,s,r=[];for(o=0,s=t.length;s>o;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):this.coordsToLatLng(t[o],i),r.push(n);return r}}),t.DomEvent={addListener:function(e,i,n,o){var s=t.Util.stamp(n),r="_leaflet_"+i+s;if(e[r])return this;var a=function(i){return n.call(o||e,i||t.DomEvent._getEvent())};if(t.Browser.touch&&"dblclick"===i&&this.addDoubleTapListener)this.addDoubleTapListener(e,a,s);else if("addEventListener"in e)if("mousewheel"===i)e.addEventListener("DOMMouseScroll",a,!1),e.addEventListener(i,a,!1);else if("mouseenter"===i||"mouseleave"===i){var l=a,h="mouseenter"===i?"mouseover":"mouseout";a=function(i){return t.DomEvent._checkMouse(e,i)?l(i):void 0},e.addEventListener(h,a,!1)}else e.addEventListener(i,a,!1);else"attachEvent"in e&&e.attachEvent("on"+i,a);return e[r]=a,this},removeListener:function(e,i,n){var o=t.Util.stamp(n),s="_leaflet_"+i+o,r=e[s];if(r)return t.Browser.touch&&"dblclick"===i&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,o):"removeEventListener"in e?"mousewheel"===i?(e.removeEventListener("DOMMouseScroll",r,!1),e.removeEventListener(i,r,!1)):"mouseenter"===i||"mouseleave"===i?e.removeEventListener("mouseenter"===i?"mouseover":"mouseout",r,!1):e.removeEventListener(i,r,!1):"detachEvent"in e&&e.detachEvent("on"+i,r),e[s]=null,this},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!t||window.Event!==t.constructor);)e=e.caller;return t},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},disableClickPropagation:function(e){return t.DomEvent.addListener(e,t.Draggable.START,t.DomEvent.stopPropagation).addListener(e,"click",t.DomEvent.stopPropagation).addListener(e,"dblclick",t.DomEvent.stopPropagation)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(e){return t.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,i){var n=e.pageX?e.pageX:e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=e.pageY?e.pageY:e.clientY+document.body.scrollTop+document.documentElement.scrollTop,s=new t.Point(n,o);return i?s.subtract(t.DomUtil.getViewportOffset(i)):s},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},t.Draggable=t.Class.extend({includes:t.Mixin.Events,statics:{START:t.Browser.touch?"touchstart":"mousedown",END:t.Browser.touch?"touchend":"mouseup",MOVE:t.Browser.touch?"touchmove":"mousemove",TAP_TOLERANCE:15},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){this._enabled||(t.DomEvent.addListener(this._dragStartTarget,t.Draggable.START,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(t.DomEvent.removeListener(this._dragStartTarget,t.Draggable.START,this._onDown),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!(!t.Browser.touch&&e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)){if(this._simulateClick=!0,e.touches&&e.touches.length>1)return this._simulateClick=!1,void 0;var i=e.touches&&1===e.touches.length?e.touches[0]:e,n=i.target;t.DomEvent.preventDefault(e),t.Browser.touch&&"a"===n.tagName.toLowerCase()&&(n.className+=" leaflet-active"),this._moved=!1,this._moving||(t.Browser.touch||(t.DomUtil.disableTextSelection(),this._setMovingCursor()),this._startPos=this._newPos=t.DomUtil.getPosition(this._element),this._startPoint=new t.Point(i.clientX,i.clientY),t.DomEvent.addListener(document,t.Draggable.MOVE,this._onMove,this),t.DomEvent.addListener(document,t.Draggable.END,this._onUp,this))}},_onMove:function(e){if(!(e.touches&&e.touches.length>1)){t.DomEvent.preventDefault(e);var i=e.touches&&1===e.touches.length?e.touches[0]:e;this._moved||(this.fire("dragstart"),this._moved=!0),this._moving=!0;var n=new t.Point(i.clientX,i.clientY);this._newPos=this._startPos.add(n).subtract(this._startPoint),t.Util.cancelAnimFrame(this._animRequest),this._animRequest=t.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)}},_updatePosition:function(){this.fire("predrag"),t.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(e){if(this._simulateClick&&e.changedTouches){var i=e.changedTouches[0],n=i.target,o=this._newPos&&this._newPos.distanceTo(this._startPos)||0;"a"===n.tagName.toLowerCase()&&(n.className=n.className.replace(" leaflet-active","")),t.Draggable.TAP_TOLERANCE>o&&this._simulateEvent("click",i)}t.Browser.touch||(t.DomUtil.enableTextSelection(),this._restoreCursor()),t.DomEvent.removeListener(document,t.Draggable.MOVE,this._onMove),t.DomEvent.removeListener(document,t.Draggable.END,this._onUp),this._moved&&this.fire("dragend"),this._moving=!1},_setMovingCursor:function(){document.body.className+=" leaflet-dragging"},_restoreCursor:function(){document.body.className=document.body.className.replace(/ leaflet-dragging/g,"")},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}),t.Handler=t.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),t.Map.mergeOptions({dragging:!0,inertia:!t.Browser.android,inertiaDeceleration:t.Browser.touch?3e3:2e3,inertiaMaxSpeed:t.Browser.touch?1500:1e3,inertiaThreshold:t.Browser.touch?32:16,worldCopyJump:!0,continuousWorld:!1}),t.Map.Drag=t.Handler.extend({addHooks:function(){if(!this._draggable){this._draggable=new t.Draggable(this._map._mapPane,this._map._container),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);var e=this._map.options;e.worldCopyJump&&!e.continuousWorld&&(this._draggable.on("predrag",this._onPreDrag,this),this._map.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t.fire("movestart").fire("dragstart"),t._panTransition&&t._panTransition._onTransitionEnd(!0),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint(new t.LatLng(0,0));this._initialWorldOffset=i.subtract(e)},_onPreDrag:function(){var t=this._map,e=t.options.crs.scale(t.getZoom()),i=Math.round(e/2),n=this._initialWorldOffset.x,o=this._draggable._newPos.x,s=(o-i+n)%e+i-n,r=(o+i+n)%e-i-n,a=Math.abs(s+n)<Math.abs(r+n)?s:r;this._draggable._newPos.x=a},_onDragEnd:function(){var e=this._map,i=e.options,n=+new Date-this._lastTime,o=!i.inertia||n>i.inertiaThreshold||this._positions[0]===void 0;if(o)e.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime+n-this._times[0])/1e3,a=s.multiplyBy(.58/r),l=a.distanceTo(new t.Point(0,0)),h=Math.min(i.inertiaMaxSpeed,l),c=a.multiplyBy(h/l),u=h/i.inertiaDeceleration,d=c.multiplyBy(-u/2).round(),p={duration:u,easing:"ease-out"};t.Util.requestAnimFrame(t.Util.bind(function(){this._map.panBy(d,p)},this))}e.fire("dragend"),i.maxBounds&&t.Util.requestAnimFrame(this._panInsideMaxBounds,e,!0,e._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),t.Map.addInitHook("addHandler","dragging",t.Map.Drag),t.Map.mergeOptions({doubleClickZoom:!0}),t.Map.DoubleClickZoom=t.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(t){this.setView(t.latlng,this._zoom+1)}}),t.Map.addInitHook("addHandler","doubleClickZoom",t.Map.DoubleClickZoom),t.Map.mergeOptions({scrollWheelZoom:!t.Browser.touch}),t.Map.ScrollWheelZoom=t.Handler.extend({addHooks:function(){t.DomEvent.addListener(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){t.DomEvent.removeListener(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(e){var i=t.DomEvent.getWheelDelta(e);this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(e),clearTimeout(this._timer),this._timer=setTimeout(t.Util.bind(this._performZoom,this),50),t.DomEvent.preventDefault(e)},_performZoom:function(){var t=this._map,e=Math.round(this._delta),i=t.getZoom();if(e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,e){var n=this._getCenterForScrollWheelZoom(this._lastMousePos,e),o=i+e;t.setView(n,o)}},_getCenterForScrollWheelZoom:function(t,e){var i=this._map,n=i.getPixelBounds().getCenter(),o=i.getSize().divideBy(2),s=t.subtract(o).multiplyBy(1-Math.pow(2,-e)),r=n.add(s);return i.unproject(r,i._zoom,!0)}}),t.Map.addInitHook("addHandler","scrollWheelZoom",t.Map.ScrollWheelZoom),t.Util.extend(t.DomEvent,{addDoubleTapListener:function(t,e,i){function n(t){if(1===t.touches.length){var e=Date.now(),i=e-(s||e);r=t.touches[0],a=i>0&&l>=i,s=e}}function o(){a&&(r.type="dblclick",e(r),s=null)}var s,r,a=!1,l=250,h="_leaflet_",c="touchstart",u="touchend";t[h+c+i]=n,t[h+u+i]=o,t.addEventListener(c,n,!1),t.addEventListener(u,o,!1)},removeDoubleTapListener:function(t,e){var i="_leaflet_";t.removeEventListener(t,t[i+"touchstart"+e],!1),t.removeEventListener(t,t[i+"touchend"+e],!1)}}),t.Map.mergeOptions({touchZoom:t.Browser.touch&&!t.Browser.android}),t.Map.TouchZoom=t.Handler.extend({addHooks:function(){t.DomEvent.addListener(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){t.DomEvent.removeListener(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var i=this._map;if(e.touches&&2===e.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToLayerPoint(e.touches[0]),o=i.mouseEventToLayerPoint(e.touches[1]),s=i.containerPointToLayerPoint(i.getSize().divideBy(2));this._startCenter=n.add(o).divideBy(2,!0),this._startDist=n.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),t.DomEvent.addListener(document,"touchmove",this._onTouchMove,this).addListener(document,"touchend",this._onTouchEnd,this),t.DomEvent.preventDefault(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length){var i=this._map,n=i.mouseEventToLayerPoint(e.touches[0]),o=i.mouseEventToLayerPoint(e.touches[1]);this._scale=n.distanceTo(o)/this._startDist,this._delta=n.add(o).divideBy(2,!0).subtract(this._startCenter),1!==this._scale&&(this._moved||(i._mapPane.className+=" leaflet-zoom-anim",i.fire("zoomstart").fire("movestart")._prepareTileBg(),this._moved=!0),i._tileBg.style.webkitTransform=t.DomUtil.getTranslateString(this._delta)+" "+t.DomUtil.getScaleString(this._scale,this._startCenter),t.DomEvent.preventDefault(e))}},_onTouchEnd:function(){if(this._moved&&this._zooming){this._zooming=!1,t.DomEvent.removeListener(document,"touchmove",this._onTouchMove).removeListener(document,"touchend",this._onTouchEnd);var e=this._centerOffset.subtract(this._delta).divideBy(this._scale),i=this._map.getPixelOrigin().add(this._startCenter).add(e),n=this._map.unproject(i),o=this._map.getZoom(),s=Math.log(this._scale)/Math.LN2,r=s>0?Math.ceil(s):Math.floor(s),a=this._map._limitZoom(o+r),l=Math.pow(2,a-o);this._map._runAnimation(n,a,l/this._scale,this._startCenter.add(e))}}}),t.Map.addInitHook("addHandler","touchZoom",t.Map.TouchZoom),t.Map.mergeOptions({boxZoom:!0}),t.Map.BoxZoom=t.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){t.DomEvent.addListener(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){t.DomEvent.removeListener(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(e){return!e.shiftKey||1!==e.which&&1!==e.button?!1:(t.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),this._box=t.DomUtil.create("div","leaflet-zoom-box",this._pane),t.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",t.DomEvent.addListener(document,"mousemove",this._onMouseMove,this).addListener(document,"mouseup",this._onMouseUp,this).preventDefault(e),this._map.fire("boxzoomstart"),void 0)},_onMouseMove:function(e){var i=this._startLayerPoint,n=this._box,o=this._map.mouseEventToLayerPoint(e),s=o.subtract(i),r=new t.Point(Math.min(o.x,i.x),Math.min(o.y,i.y));t.DomUtil.setPosition(n,r),n.style.width=Math.abs(s.x)-4+"px",n.style.height=Math.abs(s.y)-4+"px"},_onMouseUp:function(e){this._pane.removeChild(this._box),this._container.style.cursor="",t.DomUtil.enableTextSelection(),t.DomEvent.removeListener(document,"mousemove",this._onMouseMove).removeListener(document,"mouseup",this._onMouseUp);var i=this._map,n=i.mouseEventToLayerPoint(e),o=new t.LatLngBounds(i.layerPointToLatLng(this._startLayerPoint),i.layerPointToLatLng(n));i.fitBounds(o),i.fire("boxzoomend",{boxZoomBounds:o})}}),t.Map.addInitHook("addHandler","boxZoom",t.Map.BoxZoom),t.Handler.MarkerDrag=t.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new t.Draggable(e,e).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=t.DomUtil.getPosition(this._marker._icon);this._marker._shadow&&t.DomUtil.setPosition(this._marker._shadow,e),this._marker._latlng=this._marker._map.layerPointToLatLng(e),this._marker.fire("move").fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),t.Handler.PolyEdit=t.Handler.extend({options:{icon:new t.DivIcon({iconSize:new t.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(e,i){this._poly=e,t.Util.setOptions(this,i)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup=new t.LayerGroup,this._markers=[];var e,i,n,o,s=this._poly._latlngs;for(e=0,n=s.length;n>e;e++)o=this._createMarker(s[e],e),o.on("click",this._onMarkerClick,this),this._markers.push(o);var r,a;for(e=0,i=n-1;n>e;i=e++)(0!==e||t.Polygon&&this._poly instanceof t.Polygon)&&(r=this._markers[i],a=this._markers[e],this._createMiddleMarker(r,a),this._updatePrevNext(r,a))},_createMarker:function(e,i){var n=new t.Marker(e,{draggable:!0,icon:this.options.icon});return n._origLatLng=e,n._index=i,n.on("drag",this._onMarkerDrag,this),n.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(n),n},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(e){var i=e.target;t.Util.extend(i._origLatLng,i._latlng),i._middleLeft&&i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i)),i._middleRight&&i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next)),this._poly.redraw()},_onMarkerClick:function(t){if(!(3>this._poly._latlngs.length)){var e=t.target,i=e._index;e._prev&&e._next&&(this._createMiddleMarker(e._prev,e._next),this._updatePrevNext(e._prev,e._next)),this._markerGroup.removeLayer(e),e._middleLeft&&this._markerGroup.removeLayer(e._middleLeft),e._middleRight&&this._markerGroup.removeLayer(e._middleRight),this._markers.splice(i,1),this._poly.spliceLatLngs(i,1),this._updateIndexes(i,-1),this._poly.fire("edit")}},_updateIndexes:function(t,e){this._markerGroup._iterateLayers(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,n,o,s=this._getMiddleLatLng(t,e),r=this._createMarker(s);r.setOpacity(.6),t._middleRight=e._middleLeft=r,n=function(){var n=e._index;r._index=n,r.off("click",i).on("click",this._onMarkerClick,this),this._poly.spliceLatLngs(n,0,s),this._markers.splice(n,0,r),r.setOpacity(1),this._updateIndexes(n,1),e._index++,this._updatePrevNext(t,r),this._updatePrevNext(r,e)},o=function(){r.off("dragstart",n,this),r.off("dragend",o,this),this._createMiddleMarker(t,r),this._createMiddleMarker(r,e)},i=function(){n.call(this),o.call(this),this._poly.fire("edit")},r.on("click",i,this).on("dragstart",n,this).on("dragend",o,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(t,e){t._next=e,e._prev=t},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.latLngToLayerPoint(t.getLatLng()),o=i.latLngToLayerPoint(e.getLatLng());return i.layerPointToLatLng(n._add(o).divideBy(2))}}),t.Control=t.Class.extend({options:{position:"topright"},initialize:function(e){t.Util.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this)},addTo:function(e){this._map=e;var i=this._container=this.onAdd(e),n=this.getPosition(),o=e._controlCorners[n];return t.DomUtil.addClass(i,"leaflet-control"),-1!==n.indexOf("bottom")?o.insertBefore(i,o.firstChild):o.appendChild(i),this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this}}),t.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function e(e,s){var r=n+e+" "+n+s;i[e+s]=t.DomUtil.create("div",r,o)}var i=this._controlCorners={},n="leaflet-",o=this._controlContainer=t.DomUtil.create("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")}}),t.Control.Zoom=t.Control.extend({options:{position:"topleft"},onAdd:function(e){var i="leaflet-control-zoom",n=t.DomUtil.create("div",i);return this._createButton("Zoom in",i+"-in",n,e.zoomIn,e),this._createButton("Zoom out",i+"-out",n,e.zoomOut,e),n},_createButton:function(e,i,n,o,s){var r=t.DomUtil.create("a",i,n);return r.href="#",r.title=e,t.DomEvent.addListener(r,"click",t.DomEvent.stopPropagation).addListener(r,"click",t.DomEvent.preventDefault).addListener(r,"click",o,s),r}}),t.Map.mergeOptions({zoomControl:!0}),t.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new t.Control.Zoom,this.addControl(this.zoomControl))}),t.Control.Attribution=t.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leaflet.cloudmade.com">Leaflet</a>'},initialize:function(e){t.Util.setOptions(this,e),this._attributions={}},onAdd:function(e){return this._container=t.DomUtil.create("div","leaflet-control-attribution"),t.DomEvent.disableClickPropagation(this._container),e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){this.options.prefix=t,this._update()},addAttribution:function(t){t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update())},removeAttribution:function(t){t&&(this._attributions[t]--,this._update())},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions.hasOwnProperty(e)&&this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" &mdash; ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),t.Map.mergeOptions({attributionControl:!0}),t.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new t.Control.Attribution).addTo(this))}),t.Control.Scale=t.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var i="leaflet-control-scale",n=t.DomUtil.create("div",i),o=this.options;return o.metric&&(this._mScale=t.DomUtil.create("div",i+"-line",n)),o.imperial&&(this._iScale=t.DomUtil.create("div",i+"-line",n)),e.on(o.updateWhenIdle?"moveend":"move",this._update,this),this._update(),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_update:function(){var e=this._map.getBounds(),i=e.getCenter().lat,n=new t.LatLng(i,e.getSouthWest().lng),o=new t.LatLng(i,e.getNorthEast().lng),s=this._map.getSize(),r=this.options,a=n.distanceTo(o)*(r.maxWidth/s.x);r.metric&&this._updateMetric(a),r.imperial&&this._updateImperial(a)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,s=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),s.style.width=this._getScaleWidth(i/e)+"px",s.innerHTML=i+" mi"):(n=this._getRoundNum(o),s.style.width=this._getScaleWidth(n/o)+"px",s.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=2?2:1,e*i}}),t.Control.Layers=t.Control.extend({options:{collapsed:!0,position:"topright"},initialize:function(e,i,n){t.Util.setOptions(this,n),this._layers={};for(var o in e)e.hasOwnProperty(o)&&this._addLayer(e[o],o);for(o in i)i.hasOwnProperty(o)&&this._addLayer(i[o],o,!0)},onAdd:function(){return this._initLayout(),this._update(),this._container},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(e){var i=t.Util.stamp(e);return delete this._layers[i],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",i=this._container=t.DomUtil.create("div",e);t.Browser.touch?t.DomEvent.addListener(i,"click",t.DomEvent.stopPropagation):t.DomEvent.disableClickPropagation(i);var n=this._form=t.DomUtil.create("form",e+"-list");if(this.options.collapsed){t.DomEvent.addListener(i,"mouseover",this._expand,this).addListener(i,"mouseout",this._collapse,this);var o=this._layersLink=t.DomUtil.create("a",e+"-toggle",i);o.href="#",o.title="Layers",t.DomEvent.addListener(o,t.Browser.touch?"click":"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=t.DomUtil.create("div",e+"-base",n),this._separator=t.DomUtil.create("div",e+"-separator",n),this._overlaysList=t.DomUtil.create("div",e+"-overlays",n),i.appendChild(n)},_addLayer:function(e,i,n){var o=t.Util.stamp(e);this._layers[o]={layer:e,name:i,overlay:n}},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t=!1,e=!1;for(var i in this._layers)if(this._layers.hasOwnProperty(i)){var n=this._layers[i];this._addItem(n),e=e||n.overlay,t=t||!n.overlay}this._separator.style.display=e&&t?"":"none"}},_addItem:function(e){var i=document.createElement("label"),n=document.createElement("input");e.overlay||(n.name="leaflet-base-layers"),n.type=e.overlay?"checkbox":"radio",n.layerId=t.Util.stamp(e.layer),n.defaultChecked=this._map.hasLayer(e.layer),t.DomEvent.addListener(n,"click",this._onInputClick,this);var o=document.createTextNode(" "+e.name);i.appendChild(n),i.appendChild(o);var s=e.overlay?this._overlaysList:this._baseLayersList;s.appendChild(i)},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=n.length;for(t=0;o>t;t++)e=n[t],i=this._layers[e.layerId],e.checked?this._map.addLayer(i.layer,!i.overlay):this._map.removeLayer(i.layer)},_expand:function(){t.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),t.Transition=t.Class.extend({includes:t.Mixin.Events,statics:{CUSTOM_PROPS_SETTERS:{position:t.DomUtil.setPosition},implemented:function(){return t.Transition.NATIVE||t.Transition.TIMER}},options:{easing:"ease",duration:.5},_setProperty:function(e,i){var n=t.Transition.CUSTOM_PROPS_SETTERS;e in n?n[e](this._el,i):this._el.style[e]=i}}),t.Transition=t.Transition.extend({statics:function(){var e=t.DomUtil.TRANSITION,i="webkitTransition"===e||"OTransition"===e?e+"End":"transitionend";return{NATIVE:!!e,TRANSITION:e,PROPERTY:e+"Property",DURATION:e+"Duration",EASING:e+"TimingFunction",END:i,CUSTOM_PROPS_PROPERTIES:{position:t.Browser.webkit?t.DomUtil.TRANSFORM:"top, left"}}}(),options:{fakeStepInterval:100},initialize:function(e,i){this._el=e,t.Util.setOptions(this,i),t.DomEvent.addListener(e,t.Transition.END,this._onTransitionEnd,this),this._onFakeStep=t.Util.bind(this._onFakeStep,this)},run:function(e){var i,n=[],o=t.Transition.CUSTOM_PROPS_PROPERTIES;for(i in e)e.hasOwnProperty(i)&&(i=o[i]?o[i]:i,i=this._dasherize(i),n.push(i));this._el.style[t.Transition.DURATION]=this.options.duration+"s",this._el.style[t.Transition.EASING]=this.options.easing,this._el.style[t.Transition.PROPERTY]=n.join(", ");for(i in e)e.hasOwnProperty(i)&&this._setProperty(i,e[i]);this._inProgress=!0,this.fire("start"),t.Transition.NATIVE?(clearInterval(this._timer),this._timer=setInterval(this._onFakeStep,this.options.fakeStepInterval)):this._onTransitionEnd()},_dasherize:function(){function t(t){return"-"+t.toLowerCase()}var e=/([A-Z])/g;return function(i){return i.replace(e,t)}}(),_onFakeStep:function(){this.fire("step")},_onTransitionEnd:function(e){this._inProgress&&(this._inProgress=!1,clearInterval(this._timer),this._el.style[t.Transition.PROPERTY]="none",this.fire("step"),e&&e.type&&this.fire("end"))}}),t.Transition=t.Transition.NATIVE?t.Transition:t.Transition.extend({statics:{getTime:Date.now||function(){return+new Date},TIMER:!0,EASINGS:{ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},CUSTOM_PROPS_GETTERS:{position:t.DomUtil.getPosition},UNIT_RE:/^[\d\.]+(\D*)$/},options:{fps:50},initialize:function(e,i){this._el=e,t.Util.extend(this.options,i);var n=t.Transition.EASINGS[this.options.easing]||t.Transition.EASINGS.ease;this._p1=new t.Point(0,0),this._p2=new t.Point(n[0],n[1]),this._p3=new t.Point(n[2],n[3]),this._p4=new t.Point(1,1),this._step=t.Util.bind(this._step,this),this._interval=Math.round(1e3/this.options.fps)},run:function(e){this._props={};var i=t.Transition.CUSTOM_PROPS_GETTERS,n=t.Transition.UNIT_RE;this.fire("start");for(var o in e)if(e.hasOwnProperty(o)){var s={};if(o in i)s.from=i[o](this._el);else{var r=this._el.style[o].match(n);s.from=parseFloat(r[0]),s.unit=r[1]}s.to=e[o],this._props[o]=s}clearInterval(this._timer),this._timer=setInterval(this._step,this._interval),this._startTime=t.Transition.getTime()},_step:function(){var e=t.Transition.getTime(),i=e-this._startTime,n=1e3*this.options.duration;n>i?this._runFrame(this._cubicBezier(i/n)):(this._runFrame(1),this._complete())},_runFrame:function(e){var i,n,o,s=t.Transition.CUSTOM_PROPS_SETTERS;for(i in this._props)this._props.hasOwnProperty(i)&&(n=this._props[i],i in s?(o=n.to.subtract(n.from).multiplyBy(e).add(n.from),s[i](this._el,o)):this._el.style[i]=(n.to-n.from)*e+n.from+n.unit);this.fire("step")},_complete:function(){clearInterval(this._timer),this.fire("end")},_cubicBezier:function(t){var e=Math.pow(1-t,3),i=3*Math.pow(1-t,2)*t,n=3*(1-t)*Math.pow(t,2),o=Math.pow(t,3),s=this._p1.multiplyBy(e),r=this._p2.multiplyBy(i),a=this._p3.multiplyBy(n),l=this._p4.multiplyBy(o);return s.add(r).add(a).add(l).y}}),t.Map.include(t.Transition&&t.Transition.implemented()?{setView:function(e,i,n){i=this._limitZoom(i);var o=this._zoom!==i;if(this._loaded&&!n&&this._layers){var s=this._getNewTopLeftPoint(e).subtract(this._getTopLeftPoint());e=new t.LatLng(e.lat,e.lng);var r=o?this._zoomToIfCenterInView&&this._zoomToIfCenterInView(e,i,s):this._panByIfClose(s);if(r)return this}return this._resetView(e,i),this},panBy:function(e,i){return e.x||e.y?(this._panTransition||(this._panTransition=new t.Transition(this._mapPane),this._panTransition.on("step",this._onPanTransitionStep,this),this._panTransition.on("end",this._onPanTransitionEnd,this)),t.Util.setOptions(this._panTransition,t.Util.extend({duration:.25},i)),this.fire("movestart"),this._mapPane.className+=" leaflet-pan-anim",this._panTransition.run({position:t.DomUtil.getPosition(this._mapPane).subtract(e)}),this):this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){this._mapPane.className=this._mapPane.className.replace(/ leaflet-pan-anim/g,""),this.fire("moveend")},_panByIfClose:function(t){return this._offsetIsWithinView(t)?(this.panBy(t),!0):!1
},_offsetIsWithinView:function(t,e){var i=e||1,n=this.getSize();return Math.abs(t.x)<=n.x*i&&Math.abs(t.y)<=n.y*i}}:{}),t.Map.mergeOptions({zoomAnimation:t.DomUtil.TRANSITION&&!t.Browser.android&&!t.Browser.mobileOpera}),t.Map.include(t.DomUtil.TRANSITION?{_zoomToIfCenterInView:function(t,e,i){if(this._animatingZoom)return!0;if(!this.options.zoomAnimation)return!1;var n=Math.pow(2,e-this._zoom),o=i.divideBy(1-1/n);if(!this._offsetIsWithinView(o,1))return!1;this._mapPane.className+=" leaflet-zoom-anim",this.fire("movestart").fire("zoomstart"),this._prepareTileBg();var s=this.containerPointToLayerPoint(this.getSize().divideBy(2)),r=s.add(o);return this._runAnimation(t,e,n,r),!0},_runAnimation:function(e,i,n,o){this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=i;var s=t.DomUtil.TRANSFORM,r=this._tileBg;clearTimeout(this._clearTileBgTimer),(t.Browser.gecko||window.opera)&&(r.style[s]+=" translate(0,0)");var a;t.Browser.android?(r.style[s+"Origin"]=o.x+"px "+o.y+"px",a="scale("+n+")"):a=t.DomUtil.getScaleString(n,o),t.Util.falseFn(r.offsetWidth);var l={};l[s]=r.style[s]+" "+a,r.transition.run(l)},_prepareTileBg:function(){var e=this._tilePane,i=this._tileBg;i||(i=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),i.style.zIndex=1),i.style[t.DomUtil.TRANSFORM]="",i.style.visibility="hidden",i.empty=!0,e.empty=!1,this._tilePane=this._panes.tilePane=i;var n=this._tileBg=e;n.transition||(n.transition=new t.Transition(n,{duration:.25,easing:"cubic-bezier(0.25,0.1,0.25,0.75)"}),n.transition.on("end",this._onZoomTransitionEnd,this)),this._stopLoadingImages(n)},_stopLoadingImages:function(e){var i,n,o,s=Array.prototype.slice.call(e.getElementsByTagName("img"));for(i=0,n=s.length;n>i;i++)o=s[i],o.complete||(o.onload=t.Util.falseFn,o.onerror=t.Util.falseFn,o.src=t.Util.emptyImageUrl,o.parentNode.removeChild(o))},_onZoomTransitionEnd:function(){this._restoreTileFront(),t.Util.falseFn(this._tileBg.offsetWidth),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),this._mapPane.className=this._mapPane.className.replace(" leaflet-zoom-anim",""),this._animatingZoom=!1},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){!this._animatingZoom&&!this.touchZoom._zooming&&(this._tileBg.innerHTML="")}}:{}),t.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locationOptions=t.Util.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this.fire("locationerror",{code:0,message:"Geolocation not supported."});var i=t.Util.bind(this._handleGeolocationResponse,this),n=t.Util.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,n,e):navigator.geolocation.getCurrentPosition(i,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this},_handleGeolocationError:function(t){var e=t.code,i=1===e?"permission denied":2===e?"position unavailable":"timeout";this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(e){var i=180*e.coords.accuracy/4e7,n=2*i,o=e.coords.latitude,s=e.coords.longitude,r=new t.LatLng(o,s),a=new t.LatLng(o-i,s-n),l=new t.LatLng(o+i,s+n),h=new t.LatLngBounds(a,l),c=this._locationOptions;if(c.setView){var u=Math.min(this.getBoundsZoom(h),c.maxZoom);this.setView(r,u)}this.fire("locationfound",{latlng:r,bounds:h,accuracy:e.coords.accuracy})}})})();var t=function(t){if("auto"==t.location)t.xtag.map.locate({setView:!0,maxZoom:t.zoom});else{var e=t.location.replace(" ","").split(",");t.xtag.map.setView(new L.LatLng(Number(e[0]),Number(e[1])),t.zoom)}},e=function(){this.xtag.tilelayer&&this.xtag.map.removeLayer(this.xtag.tilelayer),this.xtag.tilelayer=new L.TileLayer("http://{s}.tile.cloudmade.com/"+this.getAttribute("key")+"/"+(this.getAttribute("tile-set")||997)+"/256/{z}/{x}/{y}.png",this.getAttribute("tile-options")||{}),this.xtag.map.addLayer(this.xtag.tilelayer),t(this)};xtag.register("x-map",{lifecycle:{created:function(){var t=this;this.xtag.map=new L.Map(this),e.call(this),["load","viewreset","movestart","move","moveend","dragstart","zoomend","layeradd","layerremove","locationfound","drag","dragend","locationerror","popupopen","popupclose"].forEach(function(e){t.xtag.map.on(e,function(){xtag.fireEvent(t,e)})})}},accessors:{tileSet:{get:function(){return this.getAttribute("tile-set")||997},set:function(t){this.setAttribute("tile-set",t),e.call(this)}},zoom:{get:function(){var t=this.getAttribute("zoom");return Number(null==t?13:t)},set:function(t){this.setAttribute("zoom",t),this.xtag.map.setZoom(this.zoom)}},location:{get:function(){var t=this.getAttribute("location")||"37.3880, -122.0829";return t},set:function(e){this.setAttribute("location",e),t(this)}}}})}(),function(){function t(t,s){i(t);var r=t.xtag.request||{};t.xtag.request=s;var a=t.xtag.request,l=(t.getAttribute("data-callback-key")||"callback")+"=xtag.callbacks.";if(xtag.fireEvent(t,"beforerequest")===!1)return!1;if(r.url&&!s.update&&r.url.replace(RegExp("&?("+l+"x[0-9]+)"),"")==t.xtag.request.url)return t.xtag.request=r,!1;if(t.setAttribute("src",t.xtag.request.url),o.href=s.url,~o.href.indexOf(window.location.hostname))a=xtag.merge(new XMLHttpRequest,a),a.onreadystatechange=function(){t.setAttribute("data-readystate",a.readyState),4==a.readyState&&400>a.status&&e(t,a)},["error","abort","load"].forEach(function(e){a["on"+e]=function(i){i.request=a,xtag.fireEvent(t,e,i)}}),a.open(a.method,a.url,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send();else{var h=a.callbackID="x"+(new Date).getTime();t.setAttribute("data-readystate",a.readyState=0),xtag.callbacks[h]=function(n){a.status=200,a.readyState=4,a.responseText=n,e(t,a),delete xtag.callbacks[h],i(t)},a.script=document.createElement("script"),a.script.type="text/javascript",a.script.src=s.url=s.url+(~s.url.indexOf("?")?"&":"?")+l+h,a.script.onerror=function(e){t.setAttribute("data-readystate",a.readyState=4),t.setAttribute("data-requeststatus",a.status=400),xtag.fireEvent(t,"error",e)},n.appendChild(a.script)}t.xtag.request=a}function e(t,e){return e!=t.xtag.request?xtag:(t.setAttribute("data-readystate",e.readyState),t.setAttribute("data-requeststatus",e.status),xtag.fireEvent(t,"dataready",{request:e}),t.dataready&&t.dataready.call(t,e),void 0)}function i(t){var e=t.xtag.request;return e?(e.script&&~xtag.toArray(n.children).indexOf(e.script)?n.removeChild(e.script):e.abort&&e.abort(),void 0):xtag}var n=document.querySelector("head"),o=document.createElement("a");o.href="",xtag.callbacks={},xtag.mixins.request={lifecycle:{created:function(){this.src=this.getAttribute("src")}},accessors:{dataready:{get:function(){return this.xtag.dataready},set:function(t){this.xtag.dataready=t}},src:{set:function(e){e&&(this.setAttribute("src",e),t(this,{url:e,method:"GET"}))},get:function(){return this.getAttribute("src")}}}}}(),function(){var t=/OS [1-4]_\d like Mac OS X/i.test(navigator.userAgent),e=/Android 2.\d.+AppleWebKit/.test(navigator.userAgent);if(/Android 2\.3.+AppleWebKit/.test(navigator.userAgent),e){var i=document.createElement("meta");i.name="viewport",i.content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=0;",document.head.appendChild(i)}window.addEventListener("keyup",function(t){27==t.keyCode&&xtag.query(document,"x-modal[esc-hide]").forEach(function(t){null===t.getAttribute("hidden")&&xtag.fireEvent(t,"modalhide")})}),(t||e)&&window.addEventListener("scroll",function(){var t=xtag.query(document,"body > x-modal");t.forEach(function(t){t.style.top=window.pageYOffset+.5*window.innerHeight+"px"})}),xtag.register("x-modal",{mixins:["request"],lifecycle:{created:function(){this.setAttribute("tabindex",0)},inserted:function(){(t||e)&&(this.style.top=window.pageYOffset+.5*window.innerHeight+"px")}},events:{modalhide:function(){this.setAttribute("hidden","")}},methods:{toggle:function(){this.hasAttribute("hidden")?this.removeAttribute("hidden"):this.setAttribute("hidden","")}}})}(),function(){xtag.register("x-panel",{mixins:["request"],lifecycle:{created:function(){this.dataready=function(t){var e=document.createDocumentFragment(),i=document.createElement("div");e.appendChild(i),i.innerHTML=t.responseText,this.innerHTML="",xtag.toArray(i.children).forEach(function(t){if("SCRIPT"==t.nodeName){var e=document.createElement("script");e.type=t.type,t.src.length>0?e.src=t.src:e.appendChild(document.createTextNode(t.text||t.textContent||t.innerHTML)),this.appendChild(e)}else this.appendChild(t)},this)}}}})}(),function(){function t(t){var e=xtag.query(t,"x-slides > x-slide[selected]")[0]||0;return[e?xtag.query(t,"x-slides > x-slide").indexOf(e):e,t.firstElementChild.children.length-1]}function e(t,e){var i=xtag.toArray(t.firstElementChild.children);i.forEach(function(t){t.removeAttribute("selected")}),i[e||0].setAttribute("selected",null),t.firstElementChild.style[n]="translate"+(t.getAttribute("orientation")||"x")+"("+(e||0)*(-100/i.length)+"%)"}function i(t){var i=this.firstElementChild;if(i&&i.children.length&&"x-slides"==i.tagName.toLowerCase()){var o=xtag.toArray(i.children),s=100/(o.length||1),r=this.getAttribute("orientation")||"x",a="x"==r?["width","height"]:["height","width"];if(i.style[a[1]]="100%",i.style[a[0]]=100*o.length+"%",i.style[n]="translate"+r+"(0%)",o.forEach(function(t){t.style[a[0]]=s+"%",t.style[a[1]]="100%"}),t){var l=i.querySelector("[selected]");l&&e(this,o.indexOf(l)||0)}}}var n=xtag.prefix.js+"Transform";xtag.register("x-slidebox",{lifecycle:{created:function(){i()}},events:{transitionend:function(t){t.target==this.firstElementChild&&xtag.fireEvent(this,"slideend")}},accessors:{orientation:{get:function(){return this.getAttribute("orientation")},set:function(t){this.setAttribute("orientation",t.toLowerCase()),i.call(this,!0)}}},methods:{slideTo:function(t){e(this,t)},slideNext:function(){var i=t(this);i[0]++,e(this,i[0]>i[1]?0:i[0])},slidePrevious:function(){var i=t(this);i[0]--,e(this,0>i[0]?i[1]:i[0])}}}),xtag.register("x-slide",{lifecycle:{inserted:function(){var t=this.parentNode.parentNode;"x-slidebox"==t.tagName.toLowerCase()&&i.call(t,!0)},created:function(){if(this.parentNode){var t=this.parentNode.parentNode;"x-slidebox"==t.tagName.toLowerCase()&&i.call(t,!0)}}}})}();